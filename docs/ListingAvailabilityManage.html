<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: ListingAvailabilityManage
  
    &mdash; Documentation by YARD 0.9.19
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "ListingAvailabilityManage";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (L)</a> &raquo;
    
    
    <span class="title">ListingAvailabilityManage</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: ListingAvailabilityManage
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  
  <dl>
    <dt>Included in:</dt>
    <dd><span class='object_link'><a href="ListingPresenter.html" title="ListingPresenter (class)">ListingPresenter</a></span></dd>
  </dl>
  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>app/presenters/concerns/listing_availability_manage.rb</dd>
  </dl>
  
</div>








  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#availability_enabled-instance_method" title="#availability_enabled (instance method)">#<strong>availability_enabled</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#availability_per_hour_blocked_dates-instance_method" title="#availability_per_hour_blocked_dates (instance method)">#<strong>availability_per_hour_blocked_dates</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#availability_per_hour_calculate_blocked_dates-instance_method" title="#availability_per_hour_calculate_blocked_dates (instance method)">#<strong>availability_per_hour_calculate_blocked_dates</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#availability_per_hour_calculate_options_for_select-instance_method" title="#availability_per_hour_calculate_options_for_select (instance method)">#<strong>availability_per_hour_calculate_options_for_select</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#availability_per_hour_options_for_select_grouped_by_day-instance_method" title="#availability_per_hour_options_for_select_grouped_by_day (instance method)">#<strong>availability_per_hour_options_for_select_grouped_by_day</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#blocked_dates_result-instance_method" title="#blocked_dates_result (instance method)">#<strong>blocked_dates_result</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#booking_dates_end-instance_method" title="#booking_dates_end (instance method)">#<strong>booking_dates_end</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#booking_dates_end_midnight-instance_method" title="#booking_dates_end_midnight (instance method)">#<strong>booking_dates_end_midnight</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#booking_dates_start-instance_method" title="#booking_dates_start (instance method)">#<strong>booking_dates_start</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#booking_per_hour%3F-instance_method" title="#booking_per_hour? (instance method)">#<strong>booking_per_hour?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#booking_per_hour_end_time-instance_method" title="#booking_per_hour_end_time (instance method)">#<strong>booking_per_hour_end_time</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#booking_per_hour_start_time-instance_method" title="#booking_per_hour_start_time (instance method)">#<strong>booking_per_hour_start_time</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#datepicker_localized_dates-instance_method" title="#datepicker_localized_dates (instance method)">#<strong>datepicker_localized_dates</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#datepicker_per_day_or_night_setup-instance_method" title="#datepicker_per_day_or_night_setup (instance method)">#<strong>datepicker_per_day_or_night_setup</strong>(blocked_dates)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#datepicker_per_hour_setup-instance_method" title="#datepicker_per_hour_setup (instance method)">#<strong>datepicker_per_hour_setup</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#dates_to_ts_set-instance_method" title="#dates_to_ts_set (instance method)">#<strong>dates_to_ts_set</strong>(dates)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_blocked_dates-instance_method" title="#get_blocked_dates (instance method)">#<strong>get_blocked_dates</strong>(start_on:, end_on:, community:, user:, listing:)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#quantity_per_day_or_night%3F-instance_method" title="#quantity_per_day_or_night? (instance method)">#<strong>quantity_per_day_or_night?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#working_hours_props-instance_method" title="#working_hours_props (instance method)">#<strong>working_hours_props</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="availability_enabled-instance_method">
  
    #<strong>availability_enabled</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2
3
4</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/presenters/concerns/listing_availability_manage.rb', line 2</span>

<span class='kw'>def</span> <span class='id identifier rubyid_availability_enabled'>availability_enabled</span>
  <span class='id identifier rubyid_listing'>listing</span><span class='period'>.</span><span class='id identifier rubyid_availability'>availability</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span> <span class='op'>==</span> <span class='symbol'>:booking</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="availability_per_hour_blocked_dates-instance_method">
  
    #<strong>availability_per_hour_blocked_dates</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


180
181
182
183</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/presenters/concerns/listing_availability_manage.rb', line 180</span>

<span class='kw'>def</span> <span class='id identifier rubyid_availability_per_hour_blocked_dates'>availability_per_hour_blocked_dates</span>
  <span class='id identifier rubyid_availability_per_hour_calculate_options_for_select'>availability_per_hour_calculate_options_for_select</span>
  <span class='id identifier rubyid_availability_per_hour_calculate_blocked_dates'>availability_per_hour_calculate_blocked_dates</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="availability_per_hour_calculate_blocked_dates-instance_method">
  
    #<strong>availability_per_hour_calculate_blocked_dates</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/presenters/concerns/listing_availability_manage.rb', line 141</span>

<span class='kw'>def</span> <span class='id identifier rubyid_availability_per_hour_calculate_blocked_dates'>availability_per_hour_calculate_blocked_dates</span>
  <span class='kw'>return</span> <span class='ivar'>@availability_per_hour_raw_blocked_dates</span> <span class='kw'>if</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='ivar'>@availability_per_hour_raw_blocked_dates</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_all_options'>all_options</span> <span class='op'>=</span> <span class='id identifier rubyid_availability_per_hour_calculate_options_for_select'>availability_per_hour_calculate_options_for_select</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_start'>start</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_day_options'>day_options</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_listing'>listing</span><span class='period'>.</span><span class='id identifier rubyid_bookings_per_hour'>bookings_per_hour</span><span class='period'>.</span><span class='id identifier rubyid_in_period'>in_period</span><span class='lparen'>(</span><span class='id identifier rubyid_booking_per_hour_start_time'>booking_per_hour_start_time</span><span class='comma'>,</span> <span class='id identifier rubyid_booking_per_hour_end_time'>booking_per_hour_end_time</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_find_each'>find_each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_booking'>booking</span><span class='op'>|</span>
    <span class='id identifier rubyid_booking_day'>booking_day</span> <span class='op'>=</span> <span class='id identifier rubyid_booking'>booking</span><span class='period'>.</span><span class='id identifier rubyid_start_time'>start_time</span><span class='period'>.</span><span class='id identifier rubyid_to_date'>to_date</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
    <span class='id identifier rubyid_day_options'>day_options</span> <span class='op'>=</span> <span class='id identifier rubyid_all_options'>all_options</span><span class='lbracket'>[</span><span class='id identifier rubyid_booking_day'>booking_day</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_start'>start</span> <span class='op'>=</span> <span class='id identifier rubyid_booking'>booking</span><span class='period'>.</span><span class='id identifier rubyid_start_time'>start_time</span>
    <span class='kw'>while</span> <span class='id identifier rubyid_start'>start</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_booking'>booking</span><span class='period'>.</span><span class='id identifier rubyid_end_time'>end_time</span> <span class='kw'>do</span> <span class='comment'># rubocop:disable Style/WhileUntilDo
</span>      <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_start'>start</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%H:%M</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_day_options'>day_options</span>
        <span class='id identifier rubyid_day_options'>day_options</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='lbracket'>[</span><span class='symbol'>:value</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_value'>value</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_option'>option</span><span class='op'>|</span>
          <span class='id identifier rubyid_option'>option</span><span class='lbracket'>[</span><span class='symbol'>:disabled</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
          <span class='id identifier rubyid_option'>option</span><span class='lbracket'>[</span><span class='symbol'>:booking_start</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_start'>start</span> <span class='op'>==</span> <span class='id identifier rubyid_booking'>booking</span><span class='period'>.</span><span class='id identifier rubyid_start_time'>start_time</span>
        <span class='kw'>end</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_day_options'>day_options</span><span class='period'>.</span><span class='id identifier rubyid_all?'>all?</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='symbol'>:disabled</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
          <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span> <span class='id identifier rubyid_start'>start</span><span class='period'>.</span><span class='id identifier rubyid_to_date'>to_date</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_start'>start</span> <span class='op'>+=</span> <span class='int'>1</span><span class='period'>.</span><span class='id identifier rubyid_hour'>hour</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_start'>start</span> <span class='op'>=</span> <span class='id identifier rubyid_booking_per_hour_start_time'>booking_per_hour_start_time</span>
  <span class='kw'>while</span> <span class='id identifier rubyid_start'>start</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_booking_per_hour_end_time'>booking_per_hour_end_time</span> <span class='kw'>do</span> <span class='comment'># rubocop:disable Style/WhileUntilDo
</span>    <span class='id identifier rubyid_day'>day</span> <span class='op'>=</span> <span class='id identifier rubyid_start'>start</span><span class='period'>.</span><span class='id identifier rubyid_to_date'>to_date</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
    <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span> <span class='id identifier rubyid_start'>start</span><span class='period'>.</span><span class='id identifier rubyid_to_date'>to_date</span> <span class='kw'>unless</span> <span class='id identifier rubyid_all_options'>all_options</span><span class='period'>.</span><span class='id identifier rubyid_key?'>key?</span><span class='lparen'>(</span><span class='id identifier rubyid_day'>day</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_start'>start</span> <span class='op'>+=</span> <span class='int'>1</span><span class='period'>.</span><span class='id identifier rubyid_day'>day</span>
  <span class='kw'>end</span>
  <span class='ivar'>@availability_per_hour_raw_blocked_dates</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="availability_per_hour_calculate_options_for_select-instance_method">
  
    #<strong>availability_per_hour_calculate_options_for_select</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/presenters/concerns/listing_availability_manage.rb', line 100</span>

<span class='kw'>def</span> <span class='id identifier rubyid_availability_per_hour_calculate_options_for_select'>availability_per_hour_calculate_options_for_select</span>
  <span class='kw'>return</span> <span class='ivar'>@availability_per_hour_raw_options_for_select</span> <span class='kw'>if</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='ivar'>@availability_per_hour_raw_options_for_select</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_current_day'>current_day</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_start'>start</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_day_result'>day_result</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_day_slot_number'>day_slot_number</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_listing'>listing</span><span class='period'>.</span><span class='id identifier rubyid_working_hours_periods'>working_hours_periods</span><span class='lparen'>(</span><span class='id identifier rubyid_booking_per_hour_start_time'>booking_per_hour_start_time</span><span class='comma'>,</span> <span class='id identifier rubyid_booking_per_hour_end_time'>booking_per_hour_end_time</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_working_period'>working_period</span><span class='op'>|</span>
    <span class='id identifier rubyid_period_day'>period_day</span> <span class='op'>=</span> <span class='id identifier rubyid_working_period'>working_period</span><span class='period'>.</span><span class='id identifier rubyid_start_time'>start_time</span><span class='period'>.</span><span class='id identifier rubyid_to_date'>to_date</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
    <span class='id identifier rubyid_period_end_day'>period_end_day</span> <span class='op'>=</span> <span class='id identifier rubyid_working_period'>working_period</span><span class='period'>.</span><span class='id identifier rubyid_end_time'>end_time</span><span class='period'>.</span><span class='id identifier rubyid_to_date'>to_date</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
    <span class='id identifier rubyid_start'>start</span> <span class='op'>=</span> <span class='id identifier rubyid_working_period'>working_period</span><span class='period'>.</span><span class='id identifier rubyid_start_time'>start_time</span>
    <span class='kw'>while</span> <span class='id identifier rubyid_start'>start</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_working_period'>working_period</span><span class='period'>.</span><span class='id identifier rubyid_end_time'>end_time</span> <span class='kw'>do</span> <span class='comment'># rubocop:disable Style/WhileUntilDo
</span>      <span class='kw'>if</span> <span class='id identifier rubyid_current_day'>current_day</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='id identifier rubyid_current_day'>current_day</span> <span class='op'>=</span> <span class='id identifier rubyid_period_day'>period_day</span>
      <span class='kw'>elsif</span> <span class='id identifier rubyid_current_day'>current_day</span> <span class='op'>!=</span> <span class='id identifier rubyid_period_day'>period_day</span>
        <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='id identifier rubyid_current_day'>current_day</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_day_result'>day_result</span>
        <span class='id identifier rubyid_day_result'>day_result</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_current_day'>current_day</span> <span class='op'>=</span> <span class='id identifier rubyid_period_day'>period_day</span>
        <span class='id identifier rubyid_day_slot_number'>day_slot_number</span> <span class='op'>=</span> <span class='int'>0</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_start'>start</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%H:%M</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_format'>format</span> <span class='op'>=</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id identifier rubyid_locale'>locale</span> <span class='op'>==</span> <span class='symbol'>:en</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%l:%M %P</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%H:%M</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_start'>start</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='id identifier rubyid_format'>format</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_hour_hash'>hour_hash</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='label'>value:</span> <span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='label'>name:</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='label'>slot:</span> <span class='id identifier rubyid_day_slot_number'>day_slot_number</span><span class='rbrace'>}</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_start'>start</span> <span class='op'>==</span> <span class='id identifier rubyid_working_period'>working_period</span><span class='period'>.</span><span class='id identifier rubyid_end_time'>end_time</span>
        <span class='id identifier rubyid_hour_hash'>hour_hash</span><span class='lbracket'>[</span><span class='symbol'>:disabled</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
        <span class='id identifier rubyid_hour_hash'>hour_hash</span><span class='lbracket'>[</span><span class='symbol'>:slot_end</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>00:00</span><span class='tstring_end'>&#39;</span></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_period_day'>period_day</span> <span class='op'>!=</span> <span class='id identifier rubyid_period_end_day'>period_end_day</span>
          <span class='id identifier rubyid_hour_hash'>hour_hash</span><span class='lbracket'>[</span><span class='symbol'>:next_day</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_period_end_day'>period_end_day</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_day_result'>day_result</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_hour_hash'>hour_hash</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_start'>start</span> <span class='op'>+=</span> <span class='int'>1</span><span class='period'>.</span><span class='id identifier rubyid_hour'>hour</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_day_slot_number'>day_slot_number</span> <span class='op'>+=</span> <span class='int'>1</span>
    <span class='id identifier rubyid_result'>result</span><span class='lbracket'>[</span><span class='id identifier rubyid_current_day'>current_day</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_day_result'>day_result</span>
  <span class='kw'>end</span>
  <span class='ivar'>@availability_per_hour_raw_options_for_select</span> <span class='op'>=</span> <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="availability_per_hour_options_for_select_grouped_by_day-instance_method">
  
    #<strong>availability_per_hour_options_for_select_grouped_by_day</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


175
176
177
178</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/presenters/concerns/listing_availability_manage.rb', line 175</span>

<span class='kw'>def</span> <span class='id identifier rubyid_availability_per_hour_options_for_select_grouped_by_day'>availability_per_hour_options_for_select_grouped_by_day</span>
  <span class='id identifier rubyid_availability_per_hour_calculate_blocked_dates'>availability_per_hour_calculate_blocked_dates</span>
  <span class='id identifier rubyid_availability_per_hour_calculate_options_for_select'>availability_per_hour_calculate_options_for_select</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="blocked_dates_result-instance_method">
  
    #<strong>blocked_dates_result</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


18
19
20
21
22
23
24
25
26
27
28
29
30</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/presenters/concerns/listing_availability_manage.rb', line 18</span>

<span class='kw'>def</span> <span class='id identifier rubyid_blocked_dates_result'>blocked_dates_result</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_availability_enabled'>availability_enabled</span>

    <span class='id identifier rubyid_get_blocked_dates'>get_blocked_dates</span><span class='lparen'>(</span>
      <span class='label'>start_on:</span> <span class='id identifier rubyid_booking_dates_start'>booking_dates_start</span><span class='comma'>,</span>
      <span class='label'>end_on:</span> <span class='id identifier rubyid_booking_dates_end'>booking_dates_end</span><span class='comma'>,</span>
      <span class='label'>community:</span> <span class='id identifier rubyid_current_community'>current_community</span><span class='comma'>,</span>
      <span class='label'>user:</span> <span class='ivar'>@current_user</span><span class='comma'>,</span>
      <span class='label'>listing:</span> <span class='id identifier rubyid_listing'>listing</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='const'><span class='object_link'><a href="Result.html" title="Result (module)">Result</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Result/Success.html" title="Result::Success (class)">Success</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Result/Success.html#initialize-instance_method" title="Result::Success#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="booking_dates_end-instance_method">
  
    #<strong>booking_dates_end</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


10
11
12
13
14
15
16</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/presenters/concerns/listing_availability_manage.rb', line 10</span>

<span class='kw'>def</span> <span class='id identifier rubyid_booking_dates_end'>booking_dates_end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_stripe_in_use'>stripe_in_use</span>
    <span class='const'>APP_CONFIG</span><span class='period'>.</span><span class='id identifier rubyid_stripe_max_booking_date'>stripe_max_booking_date</span><span class='period'>.</span><span class='id identifier rubyid_days'>days</span><span class='period'>.</span><span class='id identifier rubyid_from_now'>from_now</span><span class='period'>.</span><span class='id identifier rubyid_to_date'>to_date</span>
  <span class='kw'>else</span>
    <span class='int'>12</span><span class='period'>.</span><span class='id identifier rubyid_months'>months</span><span class='period'>.</span><span class='id identifier rubyid_from_now'>from_now</span><span class='period'>.</span><span class='id identifier rubyid_to_date'>to_date</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="booking_dates_end_midnight-instance_method">
  
    #<strong>booking_dates_end_midnight</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


32
33
34</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/presenters/concerns/listing_availability_manage.rb', line 32</span>

<span class='kw'>def</span> <span class='id identifier rubyid_booking_dates_end_midnight'>booking_dates_end_midnight</span>
  <span class='const'><span class='object_link'><a href="DateUtils.html" title="DateUtils (module)">DateUtils</a></span></span><span class='period'>.</span><span class='id identifier rubyid_to_midnight_utc'><span class='object_link'><a href="DateUtils.html#to_midnight_utc-class_method" title="DateUtils.to_midnight_utc (method)">to_midnight_utc</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_booking_dates_end'>booking_dates_end</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="booking_dates_start-instance_method">
  
    #<strong>booking_dates_start</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


6
7
8</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/presenters/concerns/listing_availability_manage.rb', line 6</span>

<span class='kw'>def</span> <span class='id identifier rubyid_booking_dates_start'>booking_dates_start</span>
  <span class='int'>1</span><span class='period'>.</span><span class='id identifier rubyid_day'>day</span><span class='period'>.</span><span class='id identifier rubyid_ago'>ago</span><span class='period'>.</span><span class='id identifier rubyid_to_date'>to_date</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="booking_per_hour?-instance_method">
  
    #<strong>booking_per_hour?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


215
216
217
218</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/presenters/concerns/listing_availability_manage.rb', line 215</span>

<span class='kw'>def</span> <span class='id identifier rubyid_booking_per_hour?'>booking_per_hour?</span>
  <span class='id identifier rubyid_listing'>listing</span><span class='period'>.</span><span class='id identifier rubyid_unit_type'>unit_type</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="ListingUnit.html" title="ListingUnit (class)">ListingUnit</a></span></span><span class='op'>::</span><span class='const'>HOUR</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_listing'>listing</span><span class='period'>.</span><span class='id identifier rubyid_quantity_selector'>quantity_selector</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>number</span><span class='tstring_end'>&#39;</span></span> <span class='op'>&amp;&amp;</span>
    <span class='id identifier rubyid_listing'>listing</span><span class='period'>.</span><span class='id identifier rubyid_availability'>availability</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="ListingShape.html" title="ListingShape (class)">ListingShape</a></span></span><span class='op'>::</span><span class='const'>AVAILABILITY_BOOKING</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="booking_per_hour_end_time-instance_method">
  
    #<strong>booking_per_hour_end_time</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


96
97
98</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/presenters/concerns/listing_availability_manage.rb', line 96</span>

<span class='kw'>def</span> <span class='id identifier rubyid_booking_per_hour_end_time'>booking_per_hour_end_time</span>
  <span class='id identifier rubyid_date_to_time_utc'>date_to_time_utc</span><span class='lparen'>(</span><span class='id identifier rubyid_booking_dates_end'>booking_dates_end</span> <span class='op'>+</span> <span class='int'>1</span><span class='period'>.</span><span class='id identifier rubyid_day'>day</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="booking_per_hour_start_time-instance_method">
  
    #<strong>booking_per_hour_start_time</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


92
93
94</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/presenters/concerns/listing_availability_manage.rb', line 92</span>

<span class='kw'>def</span> <span class='id identifier rubyid_booking_per_hour_start_time'>booking_per_hour_start_time</span>
  <span class='id identifier rubyid_date_to_time_utc'>date_to_time_utc</span><span class='lparen'>(</span><span class='id identifier rubyid_booking_dates_start'>booking_dates_start</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="datepicker_localized_dates-instance_method">
  
    #<strong>datepicker_localized_dates</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/presenters/concerns/listing_availability_manage.rb', line 61</span>

<span class='kw'>def</span> <span class='id identifier rubyid_datepicker_localized_dates'>datepicker_localized_dates</span>
  <span class='id identifier rubyid_days'>days</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='symbol'>:sunday</span><span class='comma'>,</span> <span class='symbol'>:monday</span><span class='comma'>,</span> <span class='symbol'>:tuesday</span><span class='comma'>,</span> <span class='symbol'>:wednesday</span><span class='comma'>,</span> <span class='symbol'>:thursday</span><span class='comma'>,</span> <span class='symbol'>:friday</span><span class='comma'>,</span> <span class='symbol'>:saturday</span><span class='comma'>,</span> <span class='symbol'>:sunday</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_months'>months</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='symbol'>:january</span><span class='comma'>,</span> <span class='symbol'>:february</span><span class='comma'>,</span> <span class='symbol'>:march</span><span class='comma'>,</span> <span class='symbol'>:april</span><span class='comma'>,</span> <span class='symbol'>:may</span><span class='comma'>,</span> <span class='symbol'>:june</span><span class='comma'>,</span> <span class='symbol'>:july</span><span class='comma'>,</span> <span class='symbol'>:august</span><span class='comma'>,</span> <span class='symbol'>:september</span><span class='comma'>,</span> <span class='symbol'>:october</span><span class='comma'>,</span> <span class='symbol'>:november</span><span class='comma'>,</span> <span class='symbol'>:december</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_translated_days'>translated_days</span> <span class='op'>=</span> <span class='id identifier rubyid_days'>days</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_day_symbol'>day_symbol</span><span class='op'>|</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id identifier rubyid_t'>t</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>datepicker.days.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_day_symbol'>day_symbol</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_translated_days_short'>translated_days_short</span> <span class='op'>=</span> <span class='id identifier rubyid_days'>days</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_day_symbol'>day_symbol</span><span class='op'>|</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id identifier rubyid_t'>t</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>datepicker.days_short.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_day_symbol'>day_symbol</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_translated_days_min'>translated_days_min</span> <span class='op'>=</span> <span class='id identifier rubyid_days'>days</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_day_symbol'>day_symbol</span><span class='op'>|</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id identifier rubyid_t'>t</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>datepicker.days_min.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_day_symbol'>day_symbol</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_translated_months'>translated_months</span> <span class='op'>=</span> <span class='id identifier rubyid_months'>months</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_day_symbol'>day_symbol</span><span class='op'>|</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id identifier rubyid_t'>t</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>datepicker.months.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_day_symbol'>day_symbol</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_translated_months_short'>translated_months_short</span> <span class='op'>=</span> <span class='id identifier rubyid_months'>months</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_day_symbol'>day_symbol</span><span class='op'>|</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id identifier rubyid_t'>t</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>datepicker.months_short.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_day_symbol'>day_symbol</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='lbrace'>{</span>
    <span class='label'>days:</span> <span class='id identifier rubyid_translated_days'>translated_days</span><span class='comma'>,</span>
    <span class='label'>daysShort:</span> <span class='id identifier rubyid_translated_days_short'>translated_days_short</span><span class='comma'>,</span>
    <span class='label'>daysMin:</span> <span class='id identifier rubyid_translated_days_min'>translated_days_min</span><span class='comma'>,</span>
    <span class='label'>months:</span> <span class='id identifier rubyid_translated_months'>translated_months</span><span class='comma'>,</span>
    <span class='label'>monthsShort:</span> <span class='id identifier rubyid_translated_months_short'>translated_months_short</span><span class='comma'>,</span>
    <span class='label'>today:</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id identifier rubyid_t'>t</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>datepicker.today</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='label'>weekStart:</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id identifier rubyid_t'>t</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>datepicker.week_start</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>default:</span> <span class='int'>0</span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='label'>clear:</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id identifier rubyid_t'>t</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>datepicker.clear</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='label'>format:</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id identifier rubyid_t'>t</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>datepicker.format</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="datepicker_per_day_or_night_setup-instance_method">
  
    #<strong>datepicker_per_day_or_night_setup</strong>(blocked_dates)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


82
83
84
85
86
87
88
89
90</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/presenters/concerns/listing_availability_manage.rb', line 82</span>

<span class='kw'>def</span> <span class='id identifier rubyid_datepicker_per_day_or_night_setup'>datepicker_per_day_or_night_setup</span><span class='lparen'>(</span><span class='id identifier rubyid_blocked_dates'>blocked_dates</span><span class='rparen'>)</span>
  <span class='lbrace'>{</span>
    <span class='label'>locale:</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id identifier rubyid_locale'>locale</span><span class='comma'>,</span>
    <span class='label'>localized_dates:</span> <span class='id identifier rubyid_datepicker_localized_dates'>datepicker_localized_dates</span><span class='comma'>,</span>
    <span class='label'>listing_quantity_selector:</span> <span class='id identifier rubyid_listing'>listing</span><span class='period'>.</span><span class='id identifier rubyid_quantity_selector'>quantity_selector</span><span class='comma'>,</span>
    <span class='label'>blocked_dates:</span> <span class='id identifier rubyid_blocked_dates'>blocked_dates</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_d'>d</span><span class='op'>|</span> <span class='id identifier rubyid_d'>d</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='label'>end_date:</span> <span class='id identifier rubyid_booking_dates_end_midnight'>booking_dates_end_midnight</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="datepicker_per_hour_setup-instance_method">
  
    #<strong>datepicker_per_hour_setup</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


185
186
187
188
189
190
191
192
193
194</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/presenters/concerns/listing_availability_manage.rb', line 185</span>

<span class='kw'>def</span> <span class='id identifier rubyid_datepicker_per_hour_setup'>datepicker_per_hour_setup</span>
  <span class='lbrace'>{</span>
    <span class='label'>locale:</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id identifier rubyid_locale'>locale</span><span class='comma'>,</span>
    <span class='label'>localized_dates:</span> <span class='id identifier rubyid_datepicker_localized_dates'>datepicker_localized_dates</span><span class='comma'>,</span>
    <span class='label'>listing_quantity_selector:</span> <span class='id identifier rubyid_listing'>listing</span><span class='period'>.</span><span class='id identifier rubyid_quantity_selector'>quantity_selector</span><span class='comma'>,</span>
    <span class='label'>blocked_dates:</span> <span class='id identifier rubyid_availability_per_hour_blocked_dates'>availability_per_hour_blocked_dates</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_d'>d</span><span class='op'>|</span> <span class='id identifier rubyid_date_to_time_utc'>date_to_time_utc</span><span class='lparen'>(</span><span class='id identifier rubyid_d'>d</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='label'>end_date:</span> <span class='id identifier rubyid_booking_dates_end_midnight'>booking_dates_end_midnight</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='comma'>,</span>
    <span class='label'>options_for_select:</span> <span class='id identifier rubyid_availability_per_hour_options_for_select_grouped_by_day'>availability_per_hour_options_for_select_grouped_by_day</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="dates_to_ts_set-instance_method">
  
    #<strong>dates_to_ts_set</strong>(dates)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


57
58
59</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/presenters/concerns/listing_availability_manage.rb', line 57</span>

<span class='kw'>def</span> <span class='id identifier rubyid_dates_to_ts_set'>dates_to_ts_set</span><span class='lparen'>(</span><span class='id identifier rubyid_dates'>dates</span><span class='rparen'>)</span>
  <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_dates'>dates</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_d'>d</span><span class='op'>|</span> <span class='const'><span class='object_link'><a href="DateUtils.html" title="DateUtils (module)">DateUtils</a></span></span><span class='period'>.</span><span class='id identifier rubyid_to_midnight_utc'><span class='object_link'><a href="DateUtils.html#to_midnight_utc-class_method" title="DateUtils.to_midnight_utc (method)">to_midnight_utc</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_d'>d</span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_blocked_dates-instance_method">
  
    #<strong>get_blocked_dates</strong>(start_on:, end_on:, community:, user:, listing:)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/presenters/concerns/listing_availability_manage.rb', line 36</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_blocked_dates'>get_blocked_dates</span><span class='lparen'>(</span><span class='label'>start_on:</span><span class='comma'>,</span> <span class='label'>end_on:</span><span class='comma'>,</span> <span class='label'>community:</span><span class='comma'>,</span> <span class='label'>user:</span><span class='comma'>,</span> <span class='label'>listing:</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="top-level-namespace.html#HarmonyClient-constant" title="HarmonyClient (constant)">HarmonyClient</a></span></span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span>
    <span class='symbol'>:query_timeslots</span><span class='comma'>,</span>
    <span class='label'>params:</span> <span class='lbrace'>{</span>
      <span class='label'>marketplaceId:</span> <span class='id identifier rubyid_community'>community</span><span class='period'>.</span><span class='id identifier rubyid_uuid_object'>uuid_object</span><span class='comma'>,</span>
      <span class='label'>refId:</span> <span class='id identifier rubyid_listing'>listing</span><span class='period'>.</span><span class='id identifier rubyid_uuid_object'>uuid_object</span><span class='comma'>,</span>
      <span class='label'>start:</span> <span class='id identifier rubyid_start_on'>start_on</span><span class='comma'>,</span>
      <span class='label'>end:</span> <span class='id identifier rubyid_end_on'>end_on</span>
    <span class='rbrace'>}</span>
  <span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_rescue'>rescue</span> <span class='lbrace'>{</span>
    <span class='const'><span class='object_link'><a href="Result.html" title="Result (module)">Result</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Result/Error.html" title="Result::Error (class)">Error</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Result/Error.html#initialize-instance_method" title="Result::Error#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>code:</span> <span class='symbol'>:harmony_api_error</span><span class='rparen'>)</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_and_then'>and_then</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_res'>res</span><span class='op'>|</span>
    <span class='id identifier rubyid_available_slots'>available_slots</span> <span class='op'>=</span> <span class='id identifier rubyid_dates_to_ts_set'>dates_to_ts_set</span><span class='lparen'>(</span>
      <span class='id identifier rubyid_res'>res</span><span class='lbracket'>[</span><span class='symbol'>:body</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:data</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_timeslot'>timeslot</span><span class='op'>|</span> <span class='id identifier rubyid_timeslot'>timeslot</span><span class='lbracket'>[</span><span class='symbol'>:attributes</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:start</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_date'>to_date</span> <span class='rbrace'>}</span>
    <span class='rparen'>)</span>
    <span class='const'><span class='object_link'><a href="Result.html" title="Result (module)">Result</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Result/Success.html" title="Result::Success (class)">Success</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Result/Success.html#initialize-instance_method" title="Result::Success#initialize (method)">new</a></span></span><span class='lparen'>(</span>
      <span class='id identifier rubyid_dates_to_ts_set'>dates_to_ts_set</span><span class='lparen'>(</span><span class='id identifier rubyid_start_on'>start_on</span><span class='op'>..</span><span class='id identifier rubyid_end_on'>end_on</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_subtract'>subtract</span><span class='lparen'>(</span><span class='id identifier rubyid_available_slots'>available_slots</span><span class='rparen'>)</span>
    <span class='rparen'>)</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="quantity_per_day_or_night?-instance_method">
  
    #<strong>quantity_per_day_or_night?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


220
221
222</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/presenters/concerns/listing_availability_manage.rb', line 220</span>

<span class='kw'>def</span> <span class='id identifier rubyid_quantity_per_day_or_night?'>quantity_per_day_or_night?</span>
  <span class='lbracket'>[</span><span class='symbol'>:day</span><span class='comma'>,</span> <span class='symbol'>:night</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_listing'>listing</span><span class='period'>.</span><span class='id identifier rubyid_quantity_selector'>quantity_selector</span><span class='op'>&amp;.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="working_hours_props-instance_method">
  
    #<strong>working_hours_props</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/presenters/concerns/listing_availability_manage.rb', line 196</span>

<span class='kw'>def</span> <span class='id identifier rubyid_working_hours_props'>working_hours_props</span>
  <span class='lbrace'>{</span>
    <span class='label'>i18n:</span> <span class='lbrace'>{</span>
      <span class='label'>locale:</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id identifier rubyid_locale'>locale</span><span class='comma'>,</span>
      <span class='label'>default_locale:</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id identifier rubyid_default_locale'>default_locale</span><span class='comma'>,</span>
      <span class='label'>locale_info:</span> <span class='const'><span class='object_link'><a href="I18nHelper.html" title="I18nHelper (module)">I18nHelper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_locale_info'><span class='object_link'><a href="I18nHelper.html#locale_info-class_method" title="I18nHelper.locale_info (method)">locale_info</a></span></span><span class='lparen'>(</span><span class='const'>Sharetribe</span><span class='op'>::</span><span class='const'>AVAILABLE_LOCALES</span><span class='comma'>,</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id identifier rubyid_locale'>locale</span><span class='rparen'>)</span>
    <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='label'>marketplace:</span> <span class='lbrace'>{</span>
      <span class='label'>uuid:</span> <span class='ivar'>@current_community</span><span class='period'>.</span><span class='id identifier rubyid_uuid_object'>uuid_object</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span>
      <span class='label'>marketplace_color1:</span> <span class='const'><span class='object_link'><a href="CommonStylesHelper.html" title="CommonStylesHelper (module)">CommonStylesHelper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_marketplace_colors'><span class='object_link'><a href="CommonStylesHelper.html#marketplace_colors-class_method" title="CommonStylesHelper.marketplace_colors (method)">marketplace_colors</a></span></span><span class='lparen'>(</span><span class='ivar'>@current_community</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='symbol'>:marketplace_color1</span><span class='rbracket'>]</span>
    <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='label'>listing:</span> <span class='id identifier rubyid_working_time_slots'>working_time_slots</span><span class='comma'>,</span>
    <span class='label'>time_slot_options:</span> <span class='id identifier rubyid_time_slot_options'>time_slot_options</span><span class='comma'>,</span>
    <span class='label'>day_names:</span> <span class='id identifier rubyid_day_names'>day_names</span><span class='comma'>,</span>
    <span class='label'>listing_just_created:</span> <span class='op'>!</span><span class='op'>!</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:listing_just_created</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='op'>!</span><span class='id identifier rubyid_listing'>listing</span><span class='period'>.</span><span class='id identifier rubyid_per_hour_ready'>per_hour_ready</span><span class='comma'>,</span>
    <span class='label'>first_day_of_week:</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id identifier rubyid_t'>t</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>date.first_day_of_week</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Tue Feb 11 14:01:47 2020 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.19 (ruby-2.6.2).
</div>

    </div>
  </body>
</html>