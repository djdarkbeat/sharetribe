<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Community
  
    &mdash; Documentation by YARD 0.9.19
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Community";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (C)</a> &raquo;
    
    
    <span class="title">Community</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Community
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="ApplicationRecord.html" title="ApplicationRecord (class)">ApplicationRecord</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">ActiveRecord::Base</li>
          
            <li class="next"><span class='object_link'><a href="ApplicationRecord.html" title="ApplicationRecord (class)">ApplicationRecord</a></span></li>
          
            <li class="next">Community</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="EmailHelper.html" title="EmailHelper (module)">EmailHelper</a></span></dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>app/models/community.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<h2 id="label-Schema+Information">Schema Information</h2>

<p>Table name: communities</p>

<pre class="code ruby"><code class="ruby">id                                         :integer          not null, primary key
uuid                                       :binary(16)       not null
ident                                      :string(255)
domain                                     :string(255)
use_domain                                 :boolean          default(FALSE), not null
created_at                                 :datetime
updated_at                                 :datetime
settings                                   :text(65535)
consent                                    :string(255)
transaction_agreement_in_use               :boolean          default(FALSE)
email_admins_about_new_members             :boolean          default(FALSE)
use_fb_like                                :boolean          default(FALSE)
real_name_required                         :boolean          default(TRUE)
automatic_newsletters                      :boolean          default(TRUE)
join_with_invite_only                      :boolean          default(FALSE)
allowed_emails                             :text(16777215)
users_can_invite_new_users                 :boolean          default(TRUE)
private                                    :boolean          default(FALSE)
label                                      :string(255)
show_date_in_listings_list                 :boolean          default(FALSE)
all_users_can_add_news                     :boolean          default(TRUE)
custom_frontpage_sidebar                   :boolean          default(FALSE)
event_feed_enabled                         :boolean          default(TRUE)
slogan                                     :string(255)
description                                :text(65535)
country                                    :string(255)
members_count                              :integer          default(0)
user_limit                                 :integer
monthly_price_in_euros                     :float(24)
logo_file_name                             :string(255)
logo_content_type                          :string(255)
logo_file_size                             :integer
logo_updated_at                            :datetime
cover_photo_file_name                      :string(255)
cover_photo_content_type                   :string(255)
cover_photo_file_size                      :integer
cover_photo_updated_at                     :datetime
small_cover_photo_file_name                :string(255)
small_cover_photo_content_type             :string(255)
small_cover_photo_file_size                :integer
small_cover_photo_updated_at               :datetime
custom_color1                              :string(255)
custom_color2                              :string(255)
slogan_color                               :string(6)
description_color                          :string(6)
stylesheet_url                             :string(255)
stylesheet_needs_recompile                 :boolean          default(FALSE)
service_logo_style                         :string(255)      default(&quot;full-logo&quot;)
currency                                   :string(3)        not null
facebook_connect_enabled                   :boolean          default(TRUE)
minimum_price_cents                        :integer
hide_expiration_date                       :boolean          default(TRUE)
facebook_connect_id                        :string(255)
facebook_connect_secret                    :string(255)
google_analytics_key                       :string(255)
google_maps_key                            :string(64)
name_display_type                          :string(255)      default(&quot;first_name_with_initial&quot;)
twitter_handle                             :string(255)
use_community_location_as_default          :boolean          default(FALSE)
preproduction_stylesheet_url               :string(255)
show_category_in_listing_list              :boolean          default(FALSE)
default_browse_view                        :string(255)      default(&quot;grid&quot;)
wide_logo_file_name                        :string(255)
wide_logo_content_type                     :string(255)
wide_logo_file_size                        :integer
wide_logo_updated_at                       :datetime
listing_comments_in_use                    :boolean          default(FALSE)
show_listing_publishing_date               :boolean          default(FALSE)
require_verification_to_post_listings      :boolean          default(FALSE)
show_price_filter                          :boolean          default(FALSE)
price_filter_min                           :integer          default(0)
price_filter_max                           :integer          default(100000)
automatic_confirmation_after_days          :integer          default(14)
favicon_file_name                          :string(255)
favicon_content_type                       :string(255)
favicon_file_size                          :integer
favicon_updated_at                         :datetime
default_min_days_between_community_updates :integer          default(7)
listing_location_required                  :boolean          default(FALSE)
custom_head_script                         :text(65535)
follow_in_use                              :boolean          default(TRUE), not null
logo_processing                            :boolean
wide_logo_processing                       :boolean
cover_photo_processing                     :boolean
small_cover_photo_processing               :boolean
favicon_processing                         :boolean
deleted                                    :boolean
end_user_analytics                         :boolean          default(TRUE)
show_slogan                                :boolean          default(TRUE)
show_description                           :boolean          default(TRUE)
hsts_max_age                               :integer
footer_theme                               :integer          default(&quot;dark&quot;)
footer_copyright                           :text(65535)
footer_enabled                             :boolean          default(FALSE)
logo_link                                  :string(255)
google_connect_enabled                     :boolean
google_connect_id                          :string(255)
google_connect_secret                      :string(255)
linkedin_connect_enabled                   :boolean
linkedin_connect_id                        :string(255)
linkedin_connect_secret                    :string(255)
pre_approved_listings                      :boolean          default(FALSE)
allow_free_conversations                   :boolean          default(TRUE)
email_admins_about_new_transactions        :boolean          default(FALSE)
</code></pre>

<p>Indexes</p>

<pre class="code ruby"><code class="ruby">index_communities_on_domain  (domain)
index_communities_on_ident   (ident)
index_communities_on_uuid    (uuid) UNIQUE
</code></pre>


  </div>
</div>
<div class="tags">
  

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Community/SocialLogo.html" title="Community::SocialLogo (class)">SocialLogo</a></span>
    
  
</p>

  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="VALID_BROWSE_TYPES-constant" class="">VALID_BROWSE_TYPES =
          
        </dt>
        <dd><pre class="code"><span class='qwords_beg'>%w{</span><span class='tstring_content'>grid</span><span class='words_sep'> </span><span class='tstring_content'>map</span><span class='words_sep'> </span><span class='tstring_content'>list</span><span class='tstring_end'>}</span></span></pre></dd>
      
        <dt id="VALID_NAME_DISPLAY_TYPES-constant" class="">VALID_NAME_DISPLAY_TYPES =
          
        </dt>
        <dd><pre class="code"><span class='qwords_beg'>%w{</span><span class='tstring_content'>first_name_only</span><span class='words_sep'> </span><span class='tstring_content'>first_name_with_initial</span><span class='words_sep'> </span><span class='tstring_content'>full_name</span><span class='tstring_end'>}</span></span></pre></dd>
      
        <dt id="FOOTER_THEMES-constant" class="">FOOTER_THEMES =
          
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
  <span class='const'>FOOTER_DARK</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>dark</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span> <span class='op'>=&gt;</span> <span class='int'>0</span><span class='comma'>,</span>
  <span class='const'>FOOTER_LIGHT</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>light</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span> <span class='op'>=&gt;</span> <span class='int'>1</span><span class='comma'>,</span>
  <span class='const'>FOOTER_MARKETPLACE_COLOR</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>marketplace_color</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span> <span class='op'>=&gt;</span> <span class='int'>2</span><span class='comma'>,</span>
  <span class='const'>FOOTER_LOGO</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>logo</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span> <span class='op'>=&gt;</span> <span class='int'>3</span>
<span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
    </dl>
  




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#terms-instance_method" title="#terms (instance method)">#<strong>terms</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute terms.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#all_admins-class_method" title="all_admins (class method)">.<strong>all_admins</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns all the people who are admins in at least one tribe.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#all_with_custom_fb_login-class_method" title="all_with_custom_fb_login (class method)">.<strong>all_with_custom_fb_login</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_by_allowed_email-class_method" title="find_by_allowed_email (class method)">.<strong>find_by_allowed_email</strong>(email)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_by_email_ending-class_method" title="find_by_email_ending (class method)">.<strong>find_by_email_ending</strong>(email)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stylesheet_needs_recompile!-class_method" title="stylesheet_needs_recompile! (class method)">.<strong>stylesheet_needs_recompile!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#with_customizations-class_method" title="with_customizations (class method)">.<strong>with_customizations</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#active_payment_types-instance_method" title="#active_payment_types (instance method)">#<strong>active_payment_types</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>FIXME-RF not the best place.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_uuid-instance_method" title="#add_uuid (instance method)">#<strong>add_uuid</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#address-instance_method" title="#address (instance method)">#<strong>address</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#admin_emails-instance_method" title="#admin_emails (instance method)">#<strong>admin_emails</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the emails of admins in an array.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#allows_user_to_send_invitations%3F-instance_method" title="#allows_user_to_send_invitations? (instance method)">#<strong>allows_user_to_send_invitations?</strong>(user)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#approve_pending_membership-instance_method" title="#approve_pending_membership (instance method)">#<strong>approve_pending_membership</strong>(person, email_address = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>approves a membership pending email if one is found if email is given, only approves if email is allowed returns true if membership was now approved false if it wasn&#39;t allowed or if already a member.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#as_json-instance_method" title="#as_json (instance method)">#<strong>as_json</strong>(options)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cache_previous_image_urls-instance_method" title="#cache_previous_image_urls (instance method)">#<strong>cache_previous_image_urls</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#close_listings_by_author-instance_method" title="#close_listings_by_author (instance method)">#<strong>close_listings_by_author</strong>(author)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#custom_stylesheet_url-instance_method" title="#custom_stylesheet_url (instance method)">#<strong>custom_stylesheet_url</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_locale-instance_method" title="#default_locale (instance method)">#<strong>default_locale</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#email_notification_types-instance_method" title="#email_notification_types (instance method)">#<strong>email_notification_types</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#full_domain-instance_method" title="#full_domain (instance method)">#<strong>full_domain</strong>(options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns full domain without protocol.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#full_name-instance_method" title="#full_name (instance method)">#<strong>full_name</strong>(locale)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#full_name_with_separator-instance_method" title="#full_name_with_separator (instance method)">#<strong>full_name_with_separator</strong>(locale)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>If community full name has several words, add an extra space to the end to make Finnish translation look better.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#full_url-instance_method" title="#full_url (instance method)">#<strong>full_url</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the full domain with default protocol in front.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_new_listings_to_update_email-instance_method" title="#get_new_listings_to_update_email (instance method)">#<strong>get_new_listings_to_update_email</strong>(person)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_custom_stylesheet%3F-instance_method" title="#has_custom_stylesheet? (instance method)">#<strong>has_custom_stylesheet?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_customizations%3F-instance_method" title="#has_customizations? (instance method)">#<strong>has_customizations?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_new_listings_since%3F-instance_method" title="#has_new_listings_since? (instance method)">#<strong>has_new_listings_since?</strong>(time)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#images_processing%3F-instance_method" title="#images_processing? (instance method)">#<strong>images_processing?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_person_only_admin-instance_method" title="#is_person_only_admin (instance method)">#<strong>is_person_only_admin</strong>(person)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#leaf_categories-instance_method" title="#leaf_categories (instance method)">#<strong>leaf_categories</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#locales-instance_method" title="#locales (instance method)">#<strong>locales</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#main_categories-instance_method" title="#main_categories (instance method)">#<strong>main_categories</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#menu_link_attributes=-instance_method" title="#menu_link_attributes= (instance method)">#<strong>menu_link_attributes=</strong>(attributes)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#name-instance_method" title="#name (instance method)">#<strong>name</strong>(locale)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#name_with_separator-instance_method" title="#name_with_separator (instance method)">#<strong>name_with_separator</strong>(locale)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>If community name has several words, add an extra space to the end to make Finnish translation look better.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#new_members_during_last-instance_method" title="#new_members_during_last (instance method)">#<strong>new_members_during_last</strong>(time)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#payment_possible_for%3F-instance_method" title="#payment_possible_for? (instance method)">#<strong>payment_possible_for?</strong>(listing)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>is it possible to pay for this listing via the payment system.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#payments_in_use%3F-instance_method" title="#payments_in_use? (instance method)">#<strong>payments_in_use?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Deprecated.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#service_name-instance_method" title="#service_name (instance method)">#<strong>service_name</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns the community specific service name if such is in use otherwise returns the global default.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stable_image_url-instance_method" title="#stable_image_url (instance method)">#<strong>stable_image_url</strong>(image_name, style = nil, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Wrapper for the various attachment images url methods which returns url of old image, while new one is processing.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#uuid_object-instance_method" title="#uuid_object (instance method)">#<strong>uuid_object</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#uuid_object=-instance_method" title="#uuid_object= (instance method)">#<strong>uuid_object=</strong>(uuid)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="EmailHelper.html" title="EmailHelper (module)">EmailHelper</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="EmailHelper.html#can_accept_user_based_on_email%3F-instance_method" title="EmailHelper#can_accept_user_based_on_email? (method)">#can_accept_user_based_on_email?</a></span>, <span class='object_link'><a href="EmailHelper.html#email_allowed%3F-instance_method" title="EmailHelper#email_allowed? (method)">#email_allowed?</a></span></p>

  
  
  
  
  
  
  
  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="terms=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="terms-instance_method">
  
    #<strong>terms</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute terms</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


328
329
330</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 328</span>

<span class='kw'>def</span> <span class='id identifier rubyid_terms'>terms</span>
  <span class='ivar'>@terms</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="all_admins-class_method">
  
    .<strong>all_admins</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns all the people who are admins in at least one tribe.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


577
578
579</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 577</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_all_admins'>all_admins</span>
  <span class='const'><span class='object_link'><a href="Person.html" title="Person (class)">Person</a></span></span><span class='period'>.</span><span class='id identifier rubyid_joins'>joins</span><span class='lparen'>(</span><span class='symbol'>:community_memberships</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>community_memberships.admin = &#39;1&#39;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_group'>group</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>people.id</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="all_with_custom_fb_login-class_method">
  
    .<strong>all_with_custom_fb_login</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


618
619
620
621
622
623
624
625
626</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 618</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_all_with_custom_fb_login'>all_with_custom_fb_login</span>
  <span class='kw'>begin</span>
    <span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>facebook_connect_id IS NOT NULL</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>rescue</span> <span class='const'>Mysql2</span><span class='op'>::</span><span class='const'>Error</span>
    <span class='comment'># in some environments (e.g. Travis CI) the tables are not yet loaded when this is called
</span>    <span class='comment'># so return empty array, as it shouldn&#39;t matter in those cases
</span>    <span class='kw'>return</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_by_allowed_email-class_method">
  
    .<strong>find_by_allowed_email</strong>(email)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


571
572
573
574</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 571</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_find_by_allowed_email'>find_by_allowed_email</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_email_ending'>email_ending</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>@</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>allowed_emails LIKE ?</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email_ending'>email_ending</span><span class='embexpr_end'>}</span><span class='tstring_content'>%</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_by_email_ending-class_method">
  
    .<strong>find_by_email_ending</strong>(email)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


490
491
492
493
494
495</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 490</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_find_by_email_ending'>find_by_email_ending</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="" title="Community (class)">Community</a></span></span><span class='period'>.</span><span class='id identifier rubyid_all'>all</span><span class='period'>.</span><span class='id identifier rubyid_find_each'>find_each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_community'>community</span><span class='op'>|</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_community'>community</span> <span class='kw'>if</span> <span class='id identifier rubyid_community'>community</span><span class='period'>.</span><span class='id identifier rubyid_allowed_emails'>allowed_emails</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_community'>community</span><span class='period'>.</span><span class='id identifier rubyid_email_allowed?'>email_allowed?</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="stylesheet_needs_recompile!-class_method">
  
    .<strong>stylesheet_needs_recompile!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


581
582
583</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 581</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_stylesheet_needs_recompile!'>stylesheet_needs_recompile!</span>
  <span class='const'><span class='object_link'><a href="" title="Community (class)">Community</a></span></span><span class='period'>.</span><span class='id identifier rubyid_with_customizations'><span class='object_link'><a href="#with_customizations-class_method" title="Community.with_customizations (method)">with_customizations</a></span></span><span class='period'>.</span><span class='id identifier rubyid_update_all'>update_all</span><span class='lparen'>(</span><span class='symbol'>:stylesheet_needs_recompile</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="with_customizations-class_method">
  
    .<strong>with_customizations</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


459
460
461
462
463
464
465
466
467
468
469
470
471
472</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 459</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_with_customizations'>with_customizations</span>
  <span class='id identifier rubyid_customization_columns'>customization_columns</span> <span class='op'>=</span> <span class='lbracket'>[</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>custom_color1</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>custom_color2</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cover_photo_file_name</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>small_cover_photo_file_name</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>wide_logo_file_name</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>logo_file_name</span><span class='tstring_end'>&quot;</span></span>
  <span class='rbracket'>]</span>

  <span class='id identifier rubyid_sql'>sql</span> <span class='op'>=</span> <span class='id identifier rubyid_customization_columns'>customization_columns</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_column_name'>column_name</span><span class='op'>|</span> <span class='id identifier rubyid_column_name'>column_name</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> IS NOT NULL</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> OR </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

  <span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='id identifier rubyid_sql'>sql</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="active_payment_types-instance_method">
  
    #<strong>active_payment_types</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>FIXME-RF not the best place</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


655
656
657
658
659
660</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 655</span>

<span class='kw'>def</span> <span class='id identifier rubyid_active_payment_types'>active_payment_types</span>
  <span class='id identifier rubyid_supported'>supported</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_supported'>supported</span> <span class='op'>&lt;&lt;</span> <span class='symbol'>:paypal</span> <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="PaypalHelper.html" title="PaypalHelper (module)">PaypalHelper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_paypal_active?'><span class='object_link'><a href="PaypalHelper.html#paypal_active%3F-class_method" title="PaypalHelper.paypal_active? (method)">paypal_active?</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_supported'>supported</span> <span class='op'>&lt;&lt;</span> <span class='symbol'>:stripe</span> <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="StripeHelper.html" title="StripeHelper (module)">StripeHelper</a></span></span><span class='period'>.</span><span class='id identifier rubyid_stripe_active?'><span class='object_link'><a href="StripeHelper.html#stripe_active%3F-class_method" title="StripeHelper.stripe_active? (method)">stripe_active?</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_supported'>supported</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>1</span> <span class='op'>?</span> <span class='id identifier rubyid_supported'>supported</span> <span class='op'>:</span> <span class='id identifier rubyid_supported'>supported</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add_uuid-instance_method">
  
    #<strong>add_uuid</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


317
318
319</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 317</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_uuid'>add_uuid</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_uuid'>uuid</span> <span class='op'>||=</span> <span class='const'><span class='object_link'><a href="UUIDUtils.html" title="UUIDUtils (module)">UUIDUtils</a></span></span><span class='period'>.</span><span class='id identifier rubyid_create_raw'><span class='object_link'><a href="UUIDUtils.html#create_raw-class_method" title="UUIDUtils.create_raw (method)">create_raw</a></span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="address-instance_method">
  
    #<strong>address</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


409
410
411</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 409</span>

<span class='kw'>def</span> <span class='id identifier rubyid_address'>address</span>
  <span class='id identifier rubyid_location'>location</span> <span class='op'>?</span> <span class='id identifier rubyid_location'>location</span><span class='period'>.</span><span class='id identifier rubyid_address'>address</span> <span class='op'>:</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="admin_emails-instance_method">
  
    #<strong>admin_emails</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the emails of admins in an array</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


431
432
433</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 431</span>

<span class='kw'>def</span> <span class='id identifier rubyid_admin_emails'>admin_emails</span>
  <span class='id identifier rubyid_admins'>admins</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_p'>p</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_confirmed_notification_email_addresses'>confirmed_notification_email_addresses</span> <span class='rbrace'>}</span> <span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="allows_user_to_send_invitations?-instance_method">
  
    #<strong>allows_user_to_send_invitations?</strong>(user)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


435
436
437</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 435</span>

<span class='kw'>def</span> <span class='id identifier rubyid_allows_user_to_send_invitations?'>allows_user_to_send_invitations?</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>
  <span class='lparen'>(</span><span class='id identifier rubyid_users_can_invite_new_users'>users_can_invite_new_users</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_member_of?'>member_of?</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_has_admin_rights?'>has_admin_rights?</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="approve_pending_membership-instance_method">
  
    #<strong>approve_pending_membership</strong>(person, email_address = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>approves a membership pending email if one is found if email is given, only approves if email is allowed returns true if membership was now approved false if it wasn&#39;t allowed or if already a member</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


589
590
591
592
593
594
595
596</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 589</span>

<span class='kw'>def</span> <span class='id identifier rubyid_approve_pending_membership'>approve_pending_membership</span><span class='lparen'>(</span><span class='id identifier rubyid_person'>person</span><span class='comma'>,</span> <span class='id identifier rubyid_email_address'>email_address</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_membership'>membership</span> <span class='op'>=</span> <span class='id identifier rubyid_community_memberships'>community_memberships</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:person_id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='symbol'>:status</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pending_email_confirmation</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_membership'>membership</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_email_address'>email_address</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_email_allowed?'>email_allowed?</span><span class='lparen'>(</span><span class='id identifier rubyid_email_address'>email_address</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_membership'>membership</span><span class='period'>.</span><span class='id identifier rubyid_update_attribute'>update_attribute</span><span class='lparen'>(</span><span class='symbol'>:status</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>accepted</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='kw'>true</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="as_json-instance_method">
  
    #<strong>as_json</strong>(options)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


648
649
650
651
652</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 648</span>

<span class='kw'>def</span> <span class='id identifier rubyid_as_json'>as_json</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_attrs'>attrs</span> <span class='op'>=</span> <span class='kw'>super</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_uuid'>uuid</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="UUIDUtils.html" title="UUIDUtils (module)">UUIDUtils</a></span></span><span class='period'>.</span><span class='id identifier rubyid_parse_raw'><span class='object_link'><a href="UUIDUtils.html#parse_raw-class_method" title="UUIDUtils.parse_raw (method)">parse_raw</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_attrs'>attrs</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>uuid</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_attrs'>attrs</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>uuid</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_uuid'>uuid</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="cache_previous_image_urls-instance_method">
  
    #<strong>cache_previous_image_urls</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 355</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cache_previous_image_urls'>cache_previous_image_urls</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_has_changes_to_save?'>has_changes_to_save?</span>

  <span class='id identifier rubyid_changes_to_save'>changes_to_save</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_attribute'>attribute</span><span class='comma'>,</span> <span class='id identifier rubyid_values'>values</span><span class='op'>|</span>
    <span class='id identifier rubyid_attachment_name'>attachment_name</span> <span class='op'>=</span> <span class='id identifier rubyid_attribute'>attribute</span><span class='period'>.</span><span class='id identifier rubyid_chomp'>chomp</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_file_name</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_attribute'>attribute</span><span class='period'>.</span><span class='id identifier rubyid_end_with?'>end_with?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_file_name</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='symbol'>:&quot;#{</span><span class='id identifier rubyid_attachment_name'>attachment_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>_processing</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_values'>values</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_attribute'>attribute</span><span class='comma'>,</span> <span class='id identifier rubyid_values'>values</span><span class='op'>|</span>
    <span class='id identifier rubyid_attachment_name'>attachment_name</span> <span class='op'>=</span> <span class='id identifier rubyid_attribute'>attribute</span><span class='period'>.</span><span class='id identifier rubyid_chomp'>chomp</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_file_name</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='comment'># Temporarily store previous attachment file name in cache
</span>    <span class='comment'># so that we can still link to it, while new attachment is being processed.
</span>    <span class='comment'># This should probably be switched to using new columns in model, so that
</span>    <span class='comment'># old link doesn&#39;t break if processing fails and cache expires.
</span>    <span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_cache'>cache</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>c_att/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_attachment_name'>attachment_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_values'>values</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>expires_in:</span> <span class='int'>5</span><span class='period'>.</span><span class='id identifier rubyid_minutes'>minutes</span><span class='rparen'>)</span>
  <span class='rbrace'>}</span>
  <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="close_listings_by_author-instance_method">
  
    #<strong>close_listings_by_author</strong>(author)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


636
637
638</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 636</span>

<span class='kw'>def</span> <span class='id identifier rubyid_close_listings_by_author'>close_listings_by_author</span><span class='lparen'>(</span><span class='id identifier rubyid_author'>author</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_listings'>listings</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:author_id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_author'>author</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_update_all'>update_all</span><span class='lparen'>(</span><span class='symbol'>:open</span> <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="custom_stylesheet_url-instance_method">
  
    #<strong>custom_stylesheet_url</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


451
452
453
454
455
456
457</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 451</span>

<span class='kw'>def</span> <span class='id identifier rubyid_custom_stylesheet_url'>custom_stylesheet_url</span>
  <span class='kw'>if</span> <span class='const'>APP_CONFIG</span><span class='period'>.</span><span class='id identifier rubyid_preproduction'>preproduction</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_preproduction_stylesheet_url'>preproduction_stylesheet_url</span>
  <span class='kw'>else</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_stylesheet_url'>stylesheet_url</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="default_locale-instance_method">
  
    #<strong>default_locale</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


413
414
415
416
417
418
419</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 413</span>

<span class='kw'>def</span> <span class='id identifier rubyid_default_locale'>default_locale</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_settings'>settings</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_settings'>settings</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>locales</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_settings'>settings</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>locales</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
  <span class='kw'>else</span>
    <span class='kw'>return</span> <span class='const'>APP_CONFIG</span><span class='period'>.</span><span class='id identifier rubyid_default_locale'>default_locale</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="email_notification_types-instance_method">
  
    #<strong>email_notification_types</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


628
629
630
631
632
633
634</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 628</span>

<span class='kw'>def</span> <span class='id identifier rubyid_email_notification_types'>email_notification_types</span>
  <span class='id identifier rubyid_valid_types'>valid_types</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Person.html" title="Person (class)">Person</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Person.html#EMAIL_NOTIFICATION_TYPES-constant" title="Person::EMAIL_NOTIFICATION_TYPES (constant)">EMAIL_NOTIFICATION_TYPES</a></span></span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_follow_in_use?'>follow_in_use?</span>
    <span class='id identifier rubyid_valid_types'>valid_types</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>email_about_new_listings_by_followed_people</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_valid_types'>valid_types</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="full_domain-instance_method">
  
    #<strong>full_domain</strong>(options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns full domain without protocol</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 507</span>

<span class='kw'>def</span> <span class='id identifier rubyid_full_domain'>full_domain</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='comment'># assume that if port is used in domain config, it should
</span>  <span class='comment'># be added to the end of the full domain for links to work
</span>  <span class='comment'># This concerns usually mostly testing and development
</span>  <span class='id identifier rubyid_default_host'>default_host</span><span class='comma'>,</span> <span class='id identifier rubyid_default_port'>default_port</span> <span class='op'>=</span> <span class='const'>APP_CONFIG</span><span class='period'>.</span><span class='id identifier rubyid_domain'>domain</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_port_string'>port_string</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:port</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_default_port'>default_port</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_domain'>domain</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_use_domain?'>use_domain?</span> <span class='comment'># custom domain
</span>    <span class='id identifier rubyid_dom'>dom</span> <span class='op'>=</span> <span class='id identifier rubyid_domain'>domain</span>
  <span class='kw'>else</span> <span class='comment'># just a subdomain specified
</span>    <span class='id identifier rubyid_dom'>dom</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_ident'>ident</span><span class='embexpr_end'>}</span><span class='tstring_content'>.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_default_host'>default_host</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_dom'>dom</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_port_string'>port_string</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_port_string'>port_string</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:with_protocol</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_dom'>dom</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='lparen'>(</span><span class='const'>APP_CONFIG</span><span class='period'>.</span><span class='id identifier rubyid_always_use_ssl'>always_use_ssl</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>true</span><span class='tstring_end'>&quot;</span></span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>https://</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_dom'>dom</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_dom'>dom</span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="full_name-instance_method">
  
    #<strong>full_name</strong>(locale)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


393
394
395</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 393</span>

<span class='kw'>def</span> <span class='id identifier rubyid_full_name'>full_name</span><span class='lparen'>(</span><span class='id identifier rubyid_locale'>locale</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_name'>name</span><span class='lparen'>(</span><span class='id identifier rubyid_locale'>locale</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="full_name_with_separator-instance_method">
  
    #<strong>full_name_with_separator</strong>(locale)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>If community full name has several words, add an extra space to the end to make Finnish translation look better.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


405
406
407</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 405</span>

<span class='kw'>def</span> <span class='id identifier rubyid_full_name_with_separator'>full_name_with_separator</span><span class='lparen'>(</span><span class='id identifier rubyid_locale'>locale</span><span class='rparen'>)</span>
  <span class='lparen'>(</span><span class='id identifier rubyid_full_name'>full_name</span><span class='lparen'>(</span><span class='id identifier rubyid_locale'>locale</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_locale'>locale</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_eql?'>eql?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fi</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_full_name'>full_name</span><span class='lparen'>(</span><span class='id identifier rubyid_locale'>locale</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='id identifier rubyid_full_name'>full_name</span><span class='lparen'>(</span><span class='id identifier rubyid_locale'>locale</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="full_url-instance_method">
  
    #<strong>full_url</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the full domain with default protocol in front</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


502
503
504</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 502</span>

<span class='kw'>def</span> <span class='id identifier rubyid_full_url'>full_url</span>
  <span class='id identifier rubyid_full_domain'>full_domain</span><span class='lparen'>(</span><span class='symbol'>:with_protocol</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_new_listings_to_update_email-instance_method">
  
    #<strong>get_new_listings_to_update_email</strong>(person)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


543
544
545
546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568
569</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 543</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_new_listings_to_update_email'>get_new_listings_to_update_email</span><span class='lparen'>(</span><span class='id identifier rubyid_person'>person</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_latest'>latest</span> <span class='op'>=</span> <span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_last_community_updates_at'>last_community_updates_at</span>

  <span class='id identifier rubyid_selected_listings'>selected_listings</span> <span class='op'>=</span> <span class='id identifier rubyid_listings'>listings</span>
    <span class='period'>.</span><span class='id identifier rubyid_currently_open'>currently_open</span>
    <span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>updates_email_at &gt; ? AND updates_email_at &gt; created_at</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_latest'>latest</span><span class='rparen'>)</span>
    <span class='period'>.</span><span class='id identifier rubyid_order'>order</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>updates_email_at DESC</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>

  <span class='id identifier rubyid_additional_listings'>additional_listings</span> <span class='op'>=</span> <span class='int'>10</span> <span class='op'>-</span> <span class='id identifier rubyid_selected_listings'>selected_listings</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span>
  <span class='id identifier rubyid_new_listings'>new_listings</span> <span class='op'>=</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_additional_listings'>additional_listings</span> <span class='op'>&gt;</span> <span class='int'>0</span>
      <span class='id identifier rubyid_listings'>listings</span>
        <span class='period'>.</span><span class='id identifier rubyid_currently_open'>currently_open</span>
        <span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>updates_email_at &gt; ? AND updates_email_at = created_at</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_latest'>latest</span><span class='rparen'>)</span>
        <span class='period'>.</span><span class='id identifier rubyid_order'>order</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>updates_email_at DESC</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='period'>.</span><span class='id identifier rubyid_limit'>limit</span><span class='lparen'>(</span><span class='id identifier rubyid_additional_listings'>additional_listings</span><span class='rparen'>)</span>
        <span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>
    <span class='kw'>else</span>
      <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>

   <span class='id identifier rubyid_selected_listings'>selected_listings</span>
    <span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span><span class='lparen'>(</span><span class='id identifier rubyid_new_listings'>new_listings</span><span class='rparen'>)</span>
    <span class='period'>.</span><span class='id identifier rubyid_sort_by'>sort_by</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_listing'>listing</span><span class='op'>|</span> <span class='id identifier rubyid_listing'>listing</span><span class='period'>.</span><span class='id identifier rubyid_updates_email_at'>updates_email_at</span><span class='rbrace'>}</span>
    <span class='period'>.</span><span class='id identifier rubyid_reverse'>reverse</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_custom_stylesheet?-instance_method">
  
    #<strong>has_custom_stylesheet?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


443
444
445
446
447
448
449</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 443</span>

<span class='kw'>def</span> <span class='id identifier rubyid_has_custom_stylesheet?'>has_custom_stylesheet?</span>
  <span class='kw'>if</span> <span class='const'>APP_CONFIG</span><span class='period'>.</span><span class='id identifier rubyid_preproduction'>preproduction</span>
    <span class='id identifier rubyid_preproduction_stylesheet_url'>preproduction_stylesheet_url</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_stylesheet_url'>stylesheet_url</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_customizations?-instance_method">
  
    #<strong>has_customizations?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


439
440
441</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 439</span>

<span class='kw'>def</span> <span class='id identifier rubyid_has_customizations?'>has_customizations?</span>
  <span class='id identifier rubyid_custom_color1'>custom_color1</span> <span class='op'>||</span> <span class='id identifier rubyid_custom_color2'>custom_color2</span> <span class='op'>||</span> <span class='id identifier rubyid_slogan_color'>slogan_color</span> <span class='op'>||</span> <span class='id identifier rubyid_description_color'>description_color</span> <span class='op'>||</span> <span class='id identifier rubyid_cover_photo'>cover_photo</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>||</span> <span class='id identifier rubyid_small_cover_photo'>small_cover_photo</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>||</span> <span class='id identifier rubyid_wide_logo'>wide_logo</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>||</span> <span class='id identifier rubyid_logo'>logo</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_new_listings_since?-instance_method">
  
    #<strong>has_new_listings_since?</strong>(time)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


539
540
541</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 539</span>

<span class='kw'>def</span> <span class='id identifier rubyid_has_new_listings_since?'>has_new_listings_since?</span><span class='lparen'>(</span><span class='id identifier rubyid_time'>time</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_listings'>listings</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>created_at &gt; ?</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_time'>time</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="images_processing?-instance_method">
  
    #<strong>images_processing?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


640
641
642
643
644
645
646</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 640</span>

<span class='kw'>def</span> <span class='id identifier rubyid_images_processing?'>images_processing?</span>
  <span class='id identifier rubyid_logo'>logo</span><span class='period'>.</span><span class='id identifier rubyid_processing?'>processing?</span> <span class='op'>||</span>
  <span class='id identifier rubyid_wide_logo'>wide_logo</span><span class='period'>.</span><span class='id identifier rubyid_processing?'>processing?</span> <span class='op'>||</span>
  <span class='id identifier rubyid_cover_photo'>cover_photo</span><span class='period'>.</span><span class='id identifier rubyid_processing?'>processing?</span> <span class='op'>||</span>
  <span class='id identifier rubyid_small_cover_photo'>small_cover_photo</span><span class='period'>.</span><span class='id identifier rubyid_processing?'>processing?</span> <span class='op'>||</span>
  <span class='id identifier rubyid_favicon'>favicon</span><span class='period'>.</span><span class='id identifier rubyid_processing?'>processing?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_person_only_admin-instance_method">
  
    #<strong>is_person_only_admin</strong>(person)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


662
663
664</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 662</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_person_only_admin'>is_person_only_admin</span><span class='lparen'>(</span><span class='id identifier rubyid_person'>person</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_admins'>admins</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span> <span class='op'>==</span> <span class='int'>1</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_admins'>admins</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span> <span class='op'>==</span> <span class='id identifier rubyid_person'>person</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="leaf_categories-instance_method">
  
    #<strong>leaf_categories</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


602
603
604</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 602</span>

<span class='kw'>def</span> <span class='id identifier rubyid_leaf_categories'>leaf_categories</span>
  <span class='id identifier rubyid_categories'>categories</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span> <span class='op'>!</span><span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_children'>children</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="locales-instance_method">
  
    #<strong>locales</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


421
422
423
424
425
426
427
428</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 421</span>

<span class='kw'>def</span> <span class='id identifier rubyid_locales'>locales</span>
 <span class='kw'>if</span> <span class='id identifier rubyid_settings'>settings</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_settings'>settings</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>locales</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_settings'>settings</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>locales</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='kw'>else</span>
    <span class='comment'># if locales not set, return the short locales from the default list
</span>    <span class='kw'>return</span> <span class='const'>Sharetribe</span><span class='op'>::</span><span class='const'>AVAILABLE_LOCALES</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_l'>l</span><span class='op'>|</span> <span class='id identifier rubyid_l'>l</span><span class='lbracket'>[</span><span class='symbol'>:ident</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="main_categories-instance_method">
  
    #<strong>main_categories</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


598
599
600</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 598</span>

<span class='kw'>def</span> <span class='id identifier rubyid_main_categories'>main_categories</span>
  <span class='id identifier rubyid_top_level_categories'>top_level_categories</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="menu_link_attributes=-instance_method">
  
    #<strong>menu_link_attributes=</strong>(attributes)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


474
475
476
477
478
479
480
481
482
483
484
485
486
487
488</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 474</span>

<span class='kw'>def</span> <span class='id identifier rubyid_menu_link_attributes='>menu_link_attributes=</span><span class='lparen'>(</span><span class='id identifier rubyid_attributes'>attributes</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_ids'>ids</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_attributes'>attributes</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_menu_link'>menu_link</span> <span class='op'>=</span> <span class='id identifier rubyid_menu_links'>menu_links</span><span class='period'>.</span><span class='id identifier rubyid_find_by_id'>find_by_id</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_menu_link'>menu_link</span><span class='period'>.</span><span class='id identifier rubyid_update'>update</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='label'>sort_priority:</span> <span class='id identifier rubyid_i'>i</span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_ids'>ids</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_menu_link'>menu_link</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_menu_links'>menu_links</span><span class='period'>.</span><span class='id identifier rubyid_build'>build</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='label'>sort_priority:</span> <span class='id identifier rubyid_i'>i</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_links_to_destroy'>links_to_destroy</span> <span class='op'>=</span> <span class='id identifier rubyid_menu_links'>menu_links</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_menu_link'>menu_link</span><span class='op'>|</span> <span class='id identifier rubyid_menu_link'>menu_link</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_ids'>ids</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_menu_link'>menu_link</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_links_to_destroy'>links_to_destroy</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_link'>link</span><span class='op'>|</span> <span class='id identifier rubyid_link'>link</span><span class='period'>.</span><span class='id identifier rubyid_destroy'>destroy</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="name-instance_method">
  
    #<strong>name</strong>(locale)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 372</span>

<span class='kw'>def</span> <span class='id identifier rubyid_name'>name</span><span class='lparen'>(</span><span class='id identifier rubyid_locale'>locale</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_customization'>customization</span> <span class='op'>=</span> <span class='const'>Maybe</span><span class='lparen'>(</span><span class='id identifier rubyid_community_customizations'>community_customizations</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>locale:</span> <span class='id identifier rubyid_locale'>locale</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_or_else'>or_else</span> <span class='lbrace'>{</span>
    <span class='comment'># We should not end up in a situation where the given locale is not found.
</span>    <span class='comment'># However, currently that is likely to happend, because:
</span>    <span class='comment'># - User has one locale
</span>    <span class='comment'># - User can join to multiple communities, which may not have user&#39;s locale available
</span>    <span class='id identifier rubyid_fallback_customisation'>fallback_customisation</span> <span class='op'>=</span> <span class='id identifier rubyid_community_customizations'>community_customizations</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>locale:</span> <span class='id identifier rubyid_default_locale'>default_locale</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
    <span class='kw'>if</span> <span class='op'>!</span><span class='lparen'>(</span><span class='id identifier rubyid_fallback_customisation'>fallback_customisation</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_fallback_customisation'>fallback_customisation</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
      <span class='comment'># Corner case: switching default language to a language without localisation.
</span>      <span class='id identifier rubyid_fallback_customisation'>fallback_customisation</span> <span class='op'>=</span> <span class='id identifier rubyid_community_customizations'>community_customizations</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>name IS NOT NULL</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_order'>order</span><span class='lparen'>(</span><span class='symbol'>:updated_at</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_fallback_customisation'>fallback_customisation</span>
  <span class='rbrace'>}</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_customization'>customization</span>
    <span class='id identifier rubyid_customization'>customization</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Cannot find translation for marketplace name community_id: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'>, locale: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_locale'>locale</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="name_with_separator-instance_method">
  
    #<strong>name_with_separator</strong>(locale)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>If community name has several words, add an extra space to the end to make Finnish translation look better.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


399
400
401</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 399</span>

<span class='kw'>def</span> <span class='id identifier rubyid_name_with_separator'>name_with_separator</span><span class='lparen'>(</span><span class='id identifier rubyid_locale'>locale</span><span class='rparen'>)</span>
  <span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='lparen'>(</span><span class='id identifier rubyid_locale'>locale</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_locale'>locale</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_eql?'>eql?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fi</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='lparen'>(</span><span class='id identifier rubyid_locale'>locale</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='id identifier rubyid_name'>name</span><span class='lparen'>(</span><span class='id identifier rubyid_locale'>locale</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="new_members_during_last-instance_method">
  
    #<strong>new_members_during_last</strong>(time)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


497
498
499</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 497</span>

<span class='kw'>def</span> <span class='id identifier rubyid_new_members_during_last'>new_members_during_last</span><span class='lparen'>(</span><span class='id identifier rubyid_time'>time</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_community_memberships'>community_memberships</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:created_at</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_time'>time</span><span class='period'>.</span><span class='id identifier rubyid_ago'>ago</span><span class='op'>..</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:person</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="payment_possible_for?-instance_method">
  
    #<strong>payment_possible_for?</strong>(listing)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>is it possible to pay for this listing via the payment system</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


607
608
609</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 607</span>

<span class='kw'>def</span> <span class='id identifier rubyid_payment_possible_for?'>payment_possible_for?</span><span class='lparen'>(</span><span class='id identifier rubyid_listing'>listing</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_listing'>listing</span><span class='period'>.</span><span class='id identifier rubyid_price'>price</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_listing'>listing</span><span class='period'>.</span><span class='id identifier rubyid_price'>price</span> <span class='op'>&gt;</span> <span class='int'>0</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_payments_in_use?'>payments_in_use?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="payments_in_use?-instance_method">
  
    #<strong>payments_in_use?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Deprecated</p>

<p>There is a method `payment_type` is community service. Use that instead.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


614
615
616</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 614</span>

<span class='kw'>def</span> <span class='id identifier rubyid_payments_in_use?'>payments_in_use?</span>
  <span class='id identifier rubyid_active_payment_types'>active_payment_types</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="service_name-instance_method">
  
    #<strong>service_name</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns the community specific service name if such is in use otherwise returns the global default</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


531
532
533
534
535
536
537</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 531</span>

<span class='kw'>def</span> <span class='id identifier rubyid_service_name'><span class='object_link'><a href="ApplicationHelper.html#service_name-instance_method" title="ApplicationHelper#service_name (method)">service_name</a></span></span>
  <span class='kw'>if</span> <span class='id identifier rubyid_settings'>settings</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_settings'>settings</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>service_name</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
    <span class='id identifier rubyid_settings'>settings</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>service_name</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='kw'>else</span>
    <span class='const'>APP_CONFIG</span><span class='period'>.</span><span class='id identifier rubyid_global_service_name'>global_service_name</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Sharetribe</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="stable_image_url-instance_method">
  
    #<strong>stable_image_url</strong>(image_name, style = nil, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Wrapper for the various attachment images url methods which returns url of old image, while new one is processing.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 332</span>

<span class='kw'>def</span> <span class='id identifier rubyid_stable_image_url'>stable_image_url</span><span class='lparen'>(</span><span class='id identifier rubyid_image_name'>image_name</span><span class='comma'>,</span> <span class='id identifier rubyid_style'>style</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_image'>image</span> <span class='op'>=</span> <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='symbol'>:&quot;#{</span><span class='id identifier rubyid_image_name'>image_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_image'>image</span><span class='period'>.</span><span class='id identifier rubyid_processing?'>processing?</span>
    <span class='id identifier rubyid_old_name'>old_name</span> <span class='op'>=</span> <span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_cache'>cache</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>c_att/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_image_name'>image_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_image'>image</span><span class='period'>.</span><span class='id identifier rubyid_url'>url</span><span class='lparen'>(</span><span class='id identifier rubyid_style'>style</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_old_name'>old_name</span>

    <span class='comment'># Temporarily set processing to false and the file name to the
</span>    <span class='comment'># old file name, so that we can call Paperclip&#39;s own url method.
</span>    <span class='id identifier rubyid_new_name'>new_name</span> <span class='op'>=</span> <span class='id identifier rubyid_image'>image</span><span class='period'>.</span><span class='id identifier rubyid_original_filename'>original_filename</span>
    <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='symbol'>:&quot;#{</span><span class='id identifier rubyid_image_name'>image_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>_processing=</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='symbol'>:&quot;#{</span><span class='id identifier rubyid_image_name'>image_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>_file_name=</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_old_name'>old_name</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_url'>url</span> <span class='op'>=</span> <span class='id identifier rubyid_image'>image</span><span class='period'>.</span><span class='id identifier rubyid_url'>url</span><span class='lparen'>(</span><span class='id identifier rubyid_style'>style</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='symbol'>:&quot;#{</span><span class='id identifier rubyid_image_name'>image_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>_file_name=</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_new_name'>new_name</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='symbol'>:&quot;#{</span><span class='id identifier rubyid_image_name'>image_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>_processing=</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_url'>url</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_image'>image</span><span class='period'>.</span><span class='id identifier rubyid_url'>url</span><span class='lparen'>(</span><span class='id identifier rubyid_style'>style</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="uuid_object-instance_method">
  
    #<strong>uuid_object</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


304
305
306
307
308
309
310</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 304</span>

<span class='kw'>def</span> <span class='id identifier rubyid_uuid_object'>uuid_object</span>
  <span class='kw'>if</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:uuid</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='kw'>nil</span>
  <span class='kw'>else</span>
    <span class='const'><span class='object_link'><a href="UUIDUtils.html" title="UUIDUtils (module)">UUIDUtils</a></span></span><span class='period'>.</span><span class='id identifier rubyid_parse_raw'><span class='object_link'><a href="UUIDUtils.html#parse_raw-class_method" title="UUIDUtils.parse_raw (method)">parse_raw</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:uuid</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="uuid_object=-instance_method">
  
    #<strong>uuid_object=</strong>(uuid)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


312
313
314</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/community.rb', line 312</span>

<span class='kw'>def</span> <span class='id identifier rubyid_uuid_object='>uuid_object=</span><span class='lparen'>(</span><span class='id identifier rubyid_uuid'>uuid</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_uuid'>uuid</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="UUIDUtils.html" title="UUIDUtils (module)">UUIDUtils</a></span></span><span class='period'>.</span><span class='id identifier rubyid_raw'><span class='object_link'><a href="UUIDUtils.html#raw-class_method" title="UUIDUtils.raw (method)">raw</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_uuid'>uuid</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Tue Feb 11 14:01:53 2020 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.19 (ruby-2.6.2).
</div>

    </div>
  </body>
</html>