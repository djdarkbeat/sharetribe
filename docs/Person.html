<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Person
  
    &mdash; Documentation by YARD 0.9.19
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Person";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (P)</a> &raquo;
    
    
    <span class="title">Person</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Person
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="ApplicationRecord.html" title="ApplicationRecord (class)">ApplicationRecord</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">ActiveRecord::Base</li>
          
            <li class="next"><span class='object_link'><a href="ApplicationRecord.html" title="ApplicationRecord (class)">ApplicationRecord</a></span></li>
          
            <li class="next">Person</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="ApplicationHelper.html" title="ApplicationHelper (module)">ApplicationHelper</a></span>, <span class='object_link'><a href="DeletePerson.html" title="DeletePerson (module)">DeletePerson</a></span>, <span class='object_link'><a href="ErrorsHelper.html" title="ErrorsHelper (module)">ErrorsHelper</a></span>, <span class='object_link'><a href="Person/ToView.html" title="Person::ToView (module)">ToView</a></span></dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>app/models/person.rb<span class="defines">,<br />
  app/models/person/to_view.rb</span>
</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>This class represents a person (a user of Sharetribe).</p>


  </div>
</div>
<div class="tags">
  

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="Person/PaymentSettingsCommon.html" title="Person::PaymentSettingsCommon (module)">PaymentSettingsCommon</a></span>, <span class='object_link'><a href="Person/ToView.html" title="Person::ToView (module)">ToView</a></span>
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Person/OmniauthService.html" title="Person::OmniauthService (class)">OmniauthService</a></span>, <span class='object_link'><a href="Person/PaymentSettingsPresenter.html" title="Person::PaymentSettingsPresenter (class)">PaymentSettingsPresenter</a></span>, <span class='object_link'><a href="Person/PaymentSettingsService.html" title="Person::PaymentSettingsService (class)">PaymentSettingsService</a></span>, <span class='object_link'><a href="Person/SettingsService.html" title="Person::SettingsService (class)">SettingsService</a></span>, <span class='object_link'><a href="Person/ShowService.html" title="Person::ShowService (class)">ShowService</a></span>
    
  
</p>

  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="DEFAULT_TIME_FOR_COMMUNITY_UPDATES-constant" class="">DEFAULT_TIME_FOR_COMMUNITY_UPDATES =
          
        </dt>
        <dd><pre class="code"><span class='int'>7</span><span class='period'>.</span><span class='id identifier rubyid_days'>days</span></pre></dd>
      
        <dt id="EMAIL_NOTIFICATION_TYPES-constant" class="">EMAIL_NOTIFICATION_TYPES =
          <div class="docstring">
  <div class="discussion">
    
<p>These are the email notifications, excluding newsletters settings</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbracket'>[</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>email_about_new_messages</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>email_about_new_comments_to_own_listing</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>email_when_conversation_accepted</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>email_when_conversation_rejected</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>email_about_new_received_testimonials</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>email_about_confirm_reminders</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>email_about_testimonial_reminders</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>email_about_completed_transactions</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>email_about_new_payments</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>email_about_new_listings_by_followed_people</span><span class='tstring_end'>&quot;</span></span>

  <span class='comment'># These should not yet be shown in UI, although they might be stored in DB
</span>  <span class='comment'># &quot;email_when_new_friend_request&quot;,
</span>  <span class='comment'># &quot;email_when_new_feedback_on_transaction&quot;,
</span>  <span class='comment'># &quot;email_when_new_listing_from_friend&quot;
</span><span class='rbracket'>]</span></pre></dd>
      
        <dt id="EMAIL_NEWSLETTER_TYPES-constant" class="">EMAIL_NEWSLETTER_TYPES =
          <div class="docstring">
  <div class="discussion">
    
<p>These should not yet be shown in UI, although they might be stored in DB “email_when_new_friend_request”, “email_when_new_feedback_on_transaction”, “email_when_new_listing_from_friend”</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbracket'>[</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>email_from_admins</span><span class='tstring_end'>&quot;</span></span>
<span class='rbracket'>]</span></pre></dd>
      
        <dt id="USERNAME_BLACKLIST-constant" class="">USERNAME_BLACKLIST =
          
        </dt>
        <dd><pre class="code"><span class='const'>YAML</span><span class='period'>.</span><span class='id identifier rubyid_load_file'>load_file</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_root'>root</span><span class='embexpr_end'>}</span><span class='tstring_content'>/config/username_blacklist.yml</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span></pre></dd>
      
    </dl>
  



  
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="ApplicationHelper.html" title="ApplicationHelper (module)">ApplicationHelper</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="ApplicationHelper.html#SOCIAL_LINKS-constant" title="ApplicationHelper::SOCIAL_LINKS (constant)">ApplicationHelper::SOCIAL_LINKS</a></span></p>


  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#consent-instance_method" title="#consent (instance method)">#<strong>consent</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#form_email-instance_method" title="#form_email (instance method)">#<strong>form_email</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute form_email.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#form_family_name-instance_method" title="#form_family_name (instance method)">#<strong>form_family_name</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute form_family_name.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#form_given_name-instance_method" title="#form_given_name (instance method)">#<strong>form_given_name</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute form_given_name.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#form_login-instance_method" title="#form_login (instance method)">#<strong>form_login</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute form_login.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#form_password-instance_method" title="#form_password (instance method)">#<strong>form_password</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute form_password.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#form_password2-instance_method" title="#form_password2 (instance method)">#<strong>form_password2</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute form_password2.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#guid-instance_method" title="#guid (instance method)">#<strong>guid</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute guid.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#input_again-instance_method" title="#input_again (instance method)">#<strong>input_again</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute input_again.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#login-instance_method" title="#login (instance method)">#<strong>login</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Virtual attribute for authenticating by either username or email This is in addition to a real persisted field like &#39;username&#39;.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#password2-instance_method" title="#password2 (instance method)">#<strong>password2</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#send_notifications-instance_method" title="#send_notifications (instance method)">#<strong>send_notifications</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute send_notifications.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_by_email_address_and_community_id-class_method" title="find_by_email_address_and_community_id (class method)">.<strong>find_by_email_address_and_community_id</strong>(email_address, community_id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#members_of-class_method" title="members_of (class method)">.<strong>members_of</strong>(community)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#search_by_pattern_sql-class_method" title="search_by_pattern_sql (class method)">.<strong>search_by_pattern_sql</strong>(table, pattern = &#39;:pattern&#39;)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#username_available%3F-class_method" title="username_available? (class method)">.<strong>username_available?</strong>(username, community_id)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#username_blacklist-class_method" title="username_blacklist (class method)">.<strong>username_blacklist</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_uuid-instance_method" title="#add_uuid (instance method)">#<strong>add_uuid</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#banned%3F-instance_method" title="#banned? (instance method)">#<strong>banned?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#can_delete_email-instance_method" title="#can_delete_email (instance method)">#<strong>can_delete_email</strong>(email)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#confirmed_notification_email_addresses-instance_method" title="#confirmed_notification_email_addresses (instance method)">#<strong>confirmed_notification_email_addresses</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#confirmed_notification_email_to-instance_method" title="#confirmed_notification_email_to (instance method)">#<strong>confirmed_notification_email_to</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Notice: If no confirmed notification emails is found, this method returns the first confirmed emails.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#confirmed_notification_emails-instance_method" title="#confirmed_notification_emails (instance method)">#<strong>confirmed_notification_emails</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#confirmed_notification_emails_to-instance_method" title="#confirmed_notification_emails_to (instance method)">#<strong>confirmed_notification_emails_to</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Notice: If no confirmed notification emails is found, this method returns the first confirmed emails.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#custom_field_value_for-instance_method" title="#custom_field_value_for (instance method)">#<strong>custom_field_value_for</strong>(custom_field)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#custom_update-instance_method" title="#custom_update (instance method)">#<strong>custom_update</strong>(params)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#email_attributes=-instance_method" title="#email_attributes= (instance method)">#<strong>email_attributes=</strong>(attributes)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates a new email.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#email_changed%3F-instance_method" title="#email_changed? (instance method)">#<strong>email_changed?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Tell Devise that email is not required.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#email_required%3F-instance_method" title="#email_required? (instance method)">#<strong>email_required?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Tell Devise that email is not required.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#feedback_positive_percentage_in_community-instance_method" title="#feedback_positive_percentage_in_community (instance method)">#<strong>feedback_positive_percentage_in_community</strong>(community)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#follow-instance_method" title="#follow (instance method)">#<strong>follow</strong>(listing)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Starts following a listing.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#followed_people_by_id-instance_method" title="#followed_people_by_id (instance method)">#<strong>followed_people_by_id</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#follows%3F-instance_method" title="#follows? (instance method)">#<strong>follows?</strong>(person)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_admin_rights%3F-instance_method" title="#has_admin_rights? (instance method)">#<strong>has_admin_rights?</strong>(community)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_confirmed_email%3F-instance_method" title="#has_confirmed_email? (instance method)">#<strong>has_confirmed_email?</strong>(address)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns true if the address given as a parameter is confirmed.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_email%3F-instance_method" title="#has_email? (instance method)">#<strong>has_email?</strong>(address)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_profile_picture%3F-instance_method" title="#has_profile_picture? (instance method)">#<strong>has_profile_picture?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>If image_file_name is null, it means the user does not have a profile picture.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_valid_email_for_community%3F-instance_method" title="#has_valid_email_for_community? (instance method)">#<strong>has_valid_email_for_community?</strong>(community)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inherit_settings_from-instance_method" title="#inherit_settings_from (instance method)">#<strong>inherit_settings_from</strong>(current_community)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A person inherits some default settings from the community in which she is joining.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_admin%3F-instance_method" title="#is_admin? (instance method)">#<strong>is_admin?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns true if the person has global admin rights in Sharetribe.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_following%3F-instance_method" title="#is_following? (instance method)">#<strong>is_following?</strong>(listing)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Checks if this user is following the given listing.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_marketplace_admin%3F-instance_method" title="#is_marketplace_admin? (instance method)">#<strong>is_marketplace_admin?</strong>(community)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#last_community_updates_at-instance_method" title="#last_community_updates_at (instance method)">#<strong>last_community_updates_at</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#latest_pending_email_address-instance_method" title="#latest_pending_email_address (instance method)">#<strong>latest_pending_email_address</strong>(community = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns and email that is pending confirmation If community is given as parameter, in case of many pending emails the one required by the community is returned.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#member_of%3F-instance_method" title="#member_of? (instance method)">#<strong>member_of?</strong>(community)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#offers-instance_method" title="#offers (instance method)">#<strong>offers</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#password=-instance_method" title="#password= (instance method)">#<strong>password=</strong>(*args)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Overrides method injected from Devise::DatabaseAuthenticatable Removes legacy pashsword and salt.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#picture_from_url-instance_method" title="#picture_from_url (instance method)">#<strong>picture_from_url</strong>(url)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#primary_email-instance_method" title="#primary_email (instance method)">#<strong>primary_email</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Primary email is the first email address that is.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#profile_info_empty%3F-instance_method" title="#profile_info_empty? (instance method)">#<strong>profile_info_empty?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#read-instance_method" title="#read (instance method)">#<strong>read</strong>(conversation)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#requests-instance_method" title="#requests (instance method)">#<strong>requests</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reset_password_token_if_needed-instance_method" title="#reset_password_token_if_needed (instance method)">#<strong>reset_password_token_if_needed</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_default_preferences-instance_method" title="#set_default_preferences (instance method)">#<strong>set_default_preferences</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_emails_that_receive_notifications-instance_method" title="#set_emails_that_receive_notifications (instance method)">#<strong>set_emails_that_receive_notifications</strong>(email_ids)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_given_name-instance_method" title="#set_given_name (instance method)">#<strong>set_given_name</strong>(name)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#should_receive%3F-instance_method" title="#should_receive? (instance method)">#<strong>should_receive?</strong>(email_type)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#should_receive_community_updates_now%3F-instance_method" title="#should_receive_community_updates_now? (instance method)">#<strong>should_receive_community_updates_now?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#street_address-instance_method" title="#street_address (instance method)">#<strong>street_address</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_param-instance_method" title="#to_param (instance method)">#<strong>to_param</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unfollow-instance_method" title="#unfollow (instance method)">#<strong>unfollow</strong>(listing)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Unfollows a listing.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unsubscribe_from_community_updates-instance_method" title="#unsubscribe_from_community_updates (instance method)">#<strong>unsubscribe_from_community_updates</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_follow_status-instance_method" title="#update_follow_status (instance method)">#<strong>update_follow_status</strong>(listing, status)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Updates the user following status based on the given status for the given listing.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#uuid_object-instance_method" title="#uuid_object (instance method)">#<strong>uuid_object</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#valid_password%3F-instance_method" title="#valid_password? (instance method)">#<strong>valid_password?</strong>(password)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Overrides method injected from Devise::DatabaseAuthenticatable Updates password with password that has been rehashed with new algorithm.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Person/ToView.html" title="Person::ToView (module)">ToView</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Person/ToView.html#first_name_with_initial-instance_method" title="Person::ToView#first_name_with_initial (method)">#first_name_with_initial</a></span>, <span class='object_link'><a href="Person/ToView.html#full_name-instance_method" title="Person::ToView#full_name (method)">#full_name</a></span>, <span class='object_link'><a href="Person/ToView.html#given_name_or_username-instance_method" title="Person::ToView#given_name_or_username (method)">#given_name_or_username</a></span>, <span class='object_link'><a href="Person/ToView.html#name-instance_method" title="Person::ToView#name (method)">#name</a></span>, <span class='object_link'><a href="Person/ToView.html#name_or_username-instance_method" title="Person::ToView#name_or_username (method)">#name_or_username</a></span></p>

  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="ApplicationHelper.html" title="ApplicationHelper (module)">ApplicationHelper</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="ApplicationHelper.html#about_links-instance_method" title="ApplicationHelper#about_links (method)">#about_links</a></span>, <span class='object_link'><a href="ApplicationHelper.html#add_links-instance_method" title="ApplicationHelper#add_links (method)">#add_links</a></span>, <span class='object_link'><a href="ApplicationHelper.html#add_links_and_br_tags-instance_method" title="ApplicationHelper#add_links_and_br_tags (method)">#add_links_and_br_tags</a></span>, <span class='object_link'><a href="ApplicationHelper.html#add_links_and_br_tags_for_email-instance_method" title="ApplicationHelper#add_links_and_br_tags_for_email (method)">#add_links_and_br_tags_for_email</a></span>, <span class='object_link'><a href="ApplicationHelper.html#add_p_tags-instance_method" title="ApplicationHelper#add_p_tags (method)">#add_p_tags</a></span>, <span class='object_link'><a href="ApplicationHelper.html#admin_links_for-instance_method" title="ApplicationHelper#admin_links_for (method)">#admin_links_for</a></span>, <span class='object_link'><a href="ApplicationHelper.html#atom_feed_url-instance_method" title="ApplicationHelper#atom_feed_url (method)">#atom_feed_url</a></span>, <span class='object_link'><a href="ApplicationHelper.html#author_link-instance_method" title="ApplicationHelper#author_link (method)">#author_link</a></span>, <span class='object_link'><a href="ApplicationHelper.html#available_locales-instance_method" title="ApplicationHelper#available_locales (method)">#available_locales</a></span>, <span class='object_link'><a href="ApplicationHelper.html#avatar_thumb-instance_method" title="ApplicationHelper#avatar_thumb (method)">#avatar_thumb</a></span>, <span class='object_link'><a href="ApplicationHelper.html#community_blank_slate-instance_method" title="ApplicationHelper#community_blank_slate (method)">#community_blank_slate</a></span>, <span class='object_link'><a href="ApplicationHelper.html#community_description-instance_method" title="ApplicationHelper#community_description (method)">#community_description</a></span>, <span class='object_link'><a href="ApplicationHelper.html#community_slogan-instance_method" title="ApplicationHelper#community_slogan (method)">#community_slogan</a></span>, <span class='object_link'><a href="ApplicationHelper.html#default_protocol-instance_method" title="ApplicationHelper#default_protocol (method)">#default_protocol</a></span>, <span class='object_link'><a href="ApplicationHelper.html#email_link_style-instance_method" title="ApplicationHelper#email_link_style (method)">#email_link_style</a></span>, <span class='object_link'><a href="ApplicationHelper.html#email_not_accepted_message-instance_method" title="ApplicationHelper#email_not_accepted_message (method)">#email_not_accepted_message</a></span>, <span class='object_link'><a href="ApplicationHelper.html#escape_for_url-class_method" title="ApplicationHelper.escape_for_url (method)">escape_for_url</a></span>, <span class='object_link'><a href="ApplicationHelper.html#facebook_like-instance_method" title="ApplicationHelper#facebook_like (method)">#facebook_like</a></span>, <span class='object_link'><a href="ApplicationHelper.html#fetch_community_service_name_from_thread-class_method" title="ApplicationHelper.fetch_community_service_name_from_thread (method)">fetch_community_service_name_from_thread</a></span>, <span class='object_link'><a href="ApplicationHelper.html#format_local_date-instance_method" title="ApplicationHelper#format_local_date (method)">#format_local_date</a></span>, <span class='object_link'><a href="ApplicationHelper.html#get_badge_class-instance_method" title="ApplicationHelper#get_badge_class (method)">#get_badge_class</a></span>, <span class='object_link'><a href="ApplicationHelper.html#get_profile_extras_tab_class-instance_method" title="ApplicationHelper#get_profile_extras_tab_class (method)">#get_profile_extras_tab_class</a></span>, <span class='object_link'><a href="ApplicationHelper.html#has_aws_keys%3F-class_method" title="ApplicationHelper.has_aws_keys? (method)">has_aws_keys?</a></span>, <span class='object_link'><a href="ApplicationHelper.html#huge_avatar_thumb-instance_method" title="ApplicationHelper#huge_avatar_thumb (method)">#huge_avatar_thumb</a></span>, <span class='object_link'><a href="ApplicationHelper.html#js_t-instance_method" title="ApplicationHelper#js_t (method)">#js_t</a></span>, <span class='object_link'><a href="ApplicationHelper.html#landing_page_path-instance_method" title="ApplicationHelper#landing_page_path (method)">#landing_page_path</a></span>, <span class='object_link'><a href="ApplicationHelper.html#large_avatar_thumb-instance_method" title="ApplicationHelper#large_avatar_thumb (method)">#large_avatar_thumb</a></span>, <span class='object_link'><a href="ApplicationHelper.html#medium_avatar_thumb-instance_method" title="ApplicationHelper#medium_avatar_thumb (method)">#medium_avatar_thumb</a></span>, <span class='object_link'><a href="ApplicationHelper.html#missing_avatar-instance_method" title="ApplicationHelper#missing_avatar (method)">#missing_avatar</a></span>, <span class='object_link'><a href="ApplicationHelper.html#on_admin%3F-instance_method" title="ApplicationHelper#on_admin? (method)">#on_admin?</a></span>, <span class='object_link'><a href="ApplicationHelper.html#one_line_for_html_safe_content-instance_method" title="ApplicationHelper#one_line_for_html_safe_content (method)">#one_line_for_html_safe_content</a></span>, <span class='object_link'><a href="ApplicationHelper.html#pageless-instance_method" title="ApplicationHelper#pageless (method)">#pageless</a></span>, <span class='object_link'><a href="ApplicationHelper.html#pick_referer_domain_part_from_request-class_method" title="ApplicationHelper.pick_referer_domain_part_from_request (method)">pick_referer_domain_part_from_request</a></span>, <span class='object_link'><a href="ApplicationHelper.html#random_sting-class_method" title="ApplicationHelper.random_sting (method)">random_sting</a></span>, <span class='object_link'><a href="ApplicationHelper.html#regex_definition_to_js-instance_method" title="ApplicationHelper#regex_definition_to_js (method)">#regex_definition_to_js</a></span>, <span class='object_link'><a href="ApplicationHelper.html#search_mode-instance_method" title="ApplicationHelper#search_mode (method)">#search_mode</a></span>, <span class='object_link'><a href="ApplicationHelper.html#search_path-instance_method" title="ApplicationHelper#search_path (method)">#search_path</a></span>, <span class='object_link'><a href="ApplicationHelper.html#search_url-instance_method" title="ApplicationHelper#search_url (method)">#search_url</a></span>, <span class='object_link'><a href="ApplicationHelper.html#send_error_notification-class_method" title="ApplicationHelper.send_error_notification (method)">send_error_notification</a></span>, <span class='object_link'><a href="ApplicationHelper.html#service_name-instance_method" title="ApplicationHelper#service_name (method)">#service_name</a></span>, <span class='object_link'><a href="ApplicationHelper.html#settings_links_for-instance_method" title="ApplicationHelper#settings_links_for (method)">#settings_links_for</a></span>, <span class='object_link'><a href="ApplicationHelper.html#small_avatar_thumb-instance_method" title="ApplicationHelper#small_avatar_thumb (method)">#small_avatar_thumb</a></span>, <span class='object_link'><a href="ApplicationHelper.html#social_link_name-instance_method" title="ApplicationHelper#social_link_name (method)">#social_link_name</a></span>, <span class='object_link'><a href="ApplicationHelper.html#social_link_placeholder-instance_method" title="ApplicationHelper#social_link_placeholder (method)">#social_link_placeholder</a></span>, <span class='object_link'><a href="ApplicationHelper.html#sort_link_direction-instance_method" title="ApplicationHelper#sort_link_direction (method)">#sort_link_direction</a></span>, <span class='object_link'><a href="ApplicationHelper.html#store_community_service_name_to_thread-class_method" title="ApplicationHelper.store_community_service_name_to_thread (method)">store_community_service_name_to_thread</a></span>, <span class='object_link'><a href="ApplicationHelper.html#store_community_service_name_to_thread_from_community-class_method" title="ApplicationHelper.store_community_service_name_to_thread_from_community (method)">store_community_service_name_to_thread_from_community</a></span>, <span class='object_link'><a href="ApplicationHelper.html#store_community_service_name_to_thread_from_community_id-class_method" title="ApplicationHelper.store_community_service_name_to_thread_from_community_id (method)">store_community_service_name_to_thread_from_community_id</a></span>, <span class='object_link'><a href="ApplicationHelper.html#text_with_line_breaks-instance_method" title="ApplicationHelper#text_with_line_breaks (method)">#text_with_line_breaks</a></span>, <span class='object_link'><a href="ApplicationHelper.html#text_with_line_breaks_for_email-instance_method" title="ApplicationHelper#text_with_line_breaks_for_email (method)">#text_with_line_breaks_for_email</a></span>, <span class='object_link'><a href="ApplicationHelper.html#text_with_line_breaks_html_safe-instance_method" title="ApplicationHelper#text_with_line_breaks_html_safe (method)">#text_with_line_breaks_html_safe</a></span>, <span class='object_link'><a href="ApplicationHelper.html#text_with_url_links-instance_method" title="ApplicationHelper#text_with_url_links (method)">#text_with_url_links</a></span>, <span class='object_link'><a href="ApplicationHelper.html#time_ago-instance_method" title="ApplicationHelper#time_ago (method)">#time_ago</a></span>, <span class='object_link'><a href="ApplicationHelper.html#translate_time_to-instance_method" title="ApplicationHelper#translate_time_to (method)">#translate_time_to</a></span>, <span class='object_link'><a href="ApplicationHelper.html#tribe_latitude-instance_method" title="ApplicationHelper#tribe_latitude (method)">#tribe_latitude</a></span>, <span class='object_link'><a href="ApplicationHelper.html#tribe_longitude-instance_method" title="ApplicationHelper#tribe_longitude (method)">#tribe_longitude</a></span>, <span class='object_link'><a href="ApplicationHelper.html#us_states-instance_method" title="ApplicationHelper#us_states (method)">#us_states</a></span>, <span class='object_link'><a href="ApplicationHelper.html#use_s3%3F-class_method" title="ApplicationHelper.use_s3? (method)">use_s3?</a></span>, <span class='object_link'><a href="ApplicationHelper.html#use_upload_s3%3F-class_method" title="ApplicationHelper.use_upload_s3? (method)">use_upload_s3?</a></span>, <span class='object_link'><a href="ApplicationHelper.html#username_label-instance_method" title="ApplicationHelper#username_label (method)">#username_label</a></span>, <span class='object_link'><a href="ApplicationHelper.html#username_or_email_label-instance_method" title="ApplicationHelper#username_or_email_label (method)">#username_or_email_label</a></span>, <span class='object_link'><a href="ApplicationHelper.html#with_invite_link-instance_method" title="ApplicationHelper#with_invite_link (method)">#with_invite_link</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="ErrorsHelper.html" title="ErrorsHelper (module)">ErrorsHelper</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="ErrorsHelper.html#add_errors_from-instance_method" title="ErrorsHelper#add_errors_from (method)">#add_errors_from</a></span></p>

  
  
  
  
  
  
  
  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="consent=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="consent-instance_method">
  
    #<strong>consent</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


406
407
408</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 406</span>

<span class='kw'>def</span> <span class='id identifier rubyid_consent'>consent</span>
  <span class='id identifier rubyid_community_membership'>community_membership</span><span class='period'>.</span><span class='id identifier rubyid_consent'>consent</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="form_email=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="form_email-instance_method">
  
    #<strong>form_email</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute form_email</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


86
87
88</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 86</span>

<span class='kw'>def</span> <span class='id identifier rubyid_form_email'>form_email</span>
  <span class='ivar'>@form_email</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="form_family_name=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="form_family_name-instance_method">
  
    #<strong>form_family_name</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute form_family_name</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


86
87
88</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 86</span>

<span class='kw'>def</span> <span class='id identifier rubyid_form_family_name'>form_family_name</span>
  <span class='ivar'>@form_family_name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="form_given_name=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="form_given_name-instance_method">
  
    #<strong>form_given_name</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute form_given_name</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


86
87
88</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 86</span>

<span class='kw'>def</span> <span class='id identifier rubyid_form_given_name'>form_given_name</span>
  <span class='ivar'>@form_given_name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="form_login=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="form_login-instance_method">
  
    #<strong>form_login</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute form_login</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


86
87
88</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 86</span>

<span class='kw'>def</span> <span class='id identifier rubyid_form_login'>form_login</span>
  <span class='ivar'>@form_login</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="form_password=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="form_password-instance_method">
  
    #<strong>form_password</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute form_password</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


86
87
88</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 86</span>

<span class='kw'>def</span> <span class='id identifier rubyid_form_password'>form_password</span>
  <span class='ivar'>@form_password</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="form_password2=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="form_password2-instance_method">
  
    #<strong>form_password2</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute form_password2</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


86
87
88</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 86</span>

<span class='kw'>def</span> <span class='id identifier rubyid_form_password2'>form_password2</span>
  <span class='ivar'>@form_password2</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="guid=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="guid-instance_method">
  
    #<strong>guid</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute guid</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


86
87
88</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 86</span>

<span class='kw'>def</span> <span class='id identifier rubyid_guid'>guid</span>
  <span class='ivar'>@guid</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="input_again=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="input_again-instance_method">
  
    #<strong>input_again</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute input_again</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


86
87
88</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 86</span>

<span class='kw'>def</span> <span class='id identifier rubyid_input_again'>input_again</span>
  <span class='ivar'>@input_again</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="login=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="login-instance_method">
  
    #<strong>login</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Virtual attribute for authenticating by either username or email This is in addition to a real persisted field like &#39;username&#39;</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


94
95
96</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 94</span>

<span class='kw'>def</span> <span class='id identifier rubyid_login'>login</span>
  <span class='ivar'>@login</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="password2=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="password2-instance_method">
  
    #<strong>password2</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


358
359
360
361
362</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 358</span>

<span class='kw'>def</span> <span class='id identifier rubyid_password2'>password2</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_new_record?'>new_record?</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_form_password2'>form_password2</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="send_notifications=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="send_notifications-instance_method">
  
    #<strong>send_notifications</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute send_notifications</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


86
87
88</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 86</span>

<span class='kw'>def</span> <span class='id identifier rubyid_send_notifications'>send_notifications</span>
  <span class='ivar'>@send_notifications</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="find_by_email_address_and_community_id-class_method">
  
    .<strong>find_by_email_address_and_community_id</strong>(email_address, community_id)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


490
491
492
493
494</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 490</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_find_by_email_address_and_community_id'>find_by_email_address_and_community_id</span><span class='lparen'>(</span><span class='id identifier rubyid_email_address'>email_address</span><span class='comma'>,</span> <span class='id identifier rubyid_community_id'>community_id</span><span class='rparen'>)</span>
  <span class='const'>Maybe</span><span class='lparen'>(</span>
    <span class='const'><span class='object_link'><a href="Email.html" title="Email (class)">Email</a></span></span><span class='period'>.</span><span class='id identifier rubyid_find_by_address_and_community_id'><span class='object_link'><a href="Email.html#find_by_address_and_community_id-class_method" title="Email.find_by_address_and_community_id (method)">find_by_address_and_community_id</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_email_address'>email_address</span><span class='comma'>,</span> <span class='id identifier rubyid_community_id'>community_id</span><span class='rparen'>)</span>
  <span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_or_else'>or_else</span><span class='lparen'>(</span><span class='kw'>nil</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="members_of-class_method">
  
    .<strong>members_of</strong>(community)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


561
562
563</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 561</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_members_of'>members_of</span><span class='lparen'>(</span><span class='id identifier rubyid_community'>community</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_joins'>joins</span><span class='lparen'>(</span><span class='symbol'>:communities</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>communities.id</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_community'>community</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="search_by_pattern_sql-class_method">
  
    .<strong>search_by_pattern_sql</strong>(table, pattern = &#39;:pattern&#39;)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


620
621
622</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 620</span>

<span class='kw'>def</span> <span class='id identifier rubyid_search_by_pattern_sql'>search_by_pattern_sql</span><span class='lparen'>(</span><span class='id identifier rubyid_table'>table</span><span class='comma'>,</span> <span class='id identifier rubyid_pattern'>pattern</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:pattern</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_table'>table</span><span class='embexpr_end'>}</span><span class='tstring_content'>.given_name LIKE </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pattern'>pattern</span><span class='embexpr_end'>}</span><span class='tstring_content'> OR </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_table'>table</span><span class='embexpr_end'>}</span><span class='tstring_content'>.family_name LIKE </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pattern'>pattern</span><span class='embexpr_end'>}</span><span class='tstring_content'> OR </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_table'>table</span><span class='embexpr_end'>}</span><span class='tstring_content'>.display_name LIKE </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pattern'>pattern</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="username_available?-class_method">
  
    .<strong>username_available?</strong>(username, community_id)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


277
278
279
280
281
282</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 277</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_username_available?'>username_available?</span><span class='lparen'>(</span><span class='id identifier rubyid_username'>username</span><span class='comma'>,</span> <span class='id identifier rubyid_community_id'>community_id</span><span class='rparen'>)</span>
  <span class='op'>!</span><span class='const'><span class='object_link'><a href="#USERNAME_BLACKLIST-constant" title="Person::USERNAME_BLACKLIST (constant)">USERNAME_BLACKLIST</a></span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_username'>username</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span>
    <span class='op'>!</span><span class='const'><span class='object_link'><a href="" title="Person (class)">Person</a></span></span>
      <span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>username = :username AND (is_admin = &#39;1&#39; OR community_id = :cid)</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>username:</span> <span class='id identifier rubyid_username'>username</span><span class='comma'>,</span> <span class='label'>cid:</span> <span class='id identifier rubyid_community_id'>community_id</span><span class='rparen'>)</span>
      <span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="username_blacklist-class_method">
  
    .<strong>username_blacklist</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


273
274
275</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 273</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_username_blacklist'>username_blacklist</span>
  <span class='const'><span class='object_link'><a href="#USERNAME_BLACKLIST-constant" title="Person::USERNAME_BLACKLIST (constant)">USERNAME_BLACKLIST</a></span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="add_uuid-instance_method">
  
    #<strong>add_uuid</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


239
240
241</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 239</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_uuid'>add_uuid</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_uuid'>uuid</span> <span class='op'>||=</span> <span class='const'><span class='object_link'><a href="UUIDUtils.html" title="UUIDUtils (module)">UUIDUtils</a></span></span><span class='period'>.</span><span class='id identifier rubyid_create_raw'><span class='object_link'><a href="UUIDUtils.html#create_raw-class_method" title="UUIDUtils.create_raw (method)">create_raw</a></span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="banned?-instance_method">
  
    #<strong>banned?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


436
437
438</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 436</span>

<span class='kw'>def</span> <span class='id identifier rubyid_banned?'>banned?</span>
  <span class='id identifier rubyid_community_membership'>community_membership</span><span class='period'>.</span><span class='id identifier rubyid_banned?'>banned?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="can_delete_email-instance_method">
  
    #<strong>can_delete_email</strong>(email)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


364
365
366
367
368</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 364</span>

<span class='kw'>def</span> <span class='id identifier rubyid_can_delete_email'>can_delete_email</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="EmailService.html" title="EmailService (class)">EmailService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_can_delete_email'><span class='object_link'><a href="EmailService.html#can_delete_email-class_method" title="EmailService.can_delete_email (method)">can_delete_email</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_emails'>emails</span><span class='comma'>,</span>
                                <span class='id identifier rubyid_email'>email</span><span class='comma'>,</span>
                                <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_accepted_community'>accepted_community</span><span class='period'>.</span><span class='id identifier rubyid_allowed_emails'>allowed_emails</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='symbol'>:result</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="confirmed_notification_email_addresses-instance_method">
  
    #<strong>confirmed_notification_email_addresses</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


448
449
450</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 448</span>

<span class='kw'>def</span> <span class='id identifier rubyid_confirmed_notification_email_addresses'>confirmed_notification_email_addresses</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_confirmed_notification_emails'>confirmed_notification_emails</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:address</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="confirmed_notification_email_to-instance_method">
  
    #<strong>confirmed_notification_email_to</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Notice: If no confirmed notification emails is found, this method returns the first confirmed emails</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


472
473
474
475
476
477
478</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 472</span>

<span class='kw'>def</span> <span class='id identifier rubyid_confirmed_notification_email_to'>confirmed_notification_email_to</span>
  <span class='id identifier rubyid_send_message_to'>send_message_to</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="EmailService.html" title="EmailService (class)">EmailService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_emails_to_send_message'><span class='object_link'><a href="EmailService.html#emails_to_send_message-class_method" title="EmailService.emails_to_send_message (method)">emails_to_send_message</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_emails'>emails</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>

  <span class='const'>Maybe</span><span class='lparen'>(</span><span class='id identifier rubyid_send_message_to'>send_message_to</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
    <span class='const'><span class='object_link'><a href="EmailService.html" title="EmailService (class)">EmailService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_emails_to_smtp_addresses'><span class='object_link'><a href="EmailService.html#emails_to_smtp_addresses-class_method" title="EmailService.emails_to_smtp_addresses (method)">emails_to_smtp_addresses</a></span></span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_email'>email</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_or_else'>or_else</span><span class='lparen'>(</span><span class='kw'>nil</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="confirmed_notification_emails-instance_method">
  
    #<strong>confirmed_notification_emails</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


444
445
446</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 444</span>

<span class='kw'>def</span> <span class='id identifier rubyid_confirmed_notification_emails'>confirmed_notification_emails</span>
  <span class='id identifier rubyid_emails'>emails</span><span class='period'>.</span><span class='id identifier rubyid_send_notifications'>send_notifications</span><span class='period'>.</span><span class='id identifier rubyid_confirmed'>confirmed</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="confirmed_notification_emails_to-instance_method">
  
    #<strong>confirmed_notification_emails_to</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Notice: If no confirmed notification emails is found, this method returns the first confirmed emails</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


454
455
456
457</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 454</span>

<span class='kw'>def</span> <span class='id identifier rubyid_confirmed_notification_emails_to'>confirmed_notification_emails_to</span>
  <span class='id identifier rubyid_send_message_to'>send_message_to</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="EmailService.html" title="EmailService (class)">EmailService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_emails_to_send_message'><span class='object_link'><a href="EmailService.html#emails_to_send_message-class_method" title="EmailService.emails_to_send_message (method)">emails_to_send_message</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_emails'>emails</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="EmailService.html" title="EmailService (class)">EmailService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_emails_to_smtp_addresses'><span class='object_link'><a href="EmailService.html#emails_to_smtp_addresses-class_method" title="EmailService.emails_to_smtp_addresses (method)">emails_to_smtp_addresses</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_send_message_to'>send_message_to</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="custom_field_value_for-instance_method">
  
    #<strong>custom_field_value_for</strong>(custom_field)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


598
599
600</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 598</span>

<span class='kw'>def</span> <span class='id identifier rubyid_custom_field_value_for'>custom_field_value_for</span><span class='lparen'>(</span><span class='id identifier rubyid_custom_field'>custom_field</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_custom_field_values'>custom_field_values</span><span class='period'>.</span><span class='id identifier rubyid_by_question'>by_question</span><span class='lparen'>(</span><span class='id identifier rubyid_custom_field'>custom_field</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="custom_update-instance_method">
  
    #<strong>custom_update</strong>(params)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 296</span>

<span class='kw'>def</span> <span class='id identifier rubyid_custom_update'>custom_update</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:preferences</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_update'>update</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='rparen'>)</span>
  <span class='kw'>else</span>

    <span class='comment'>#Handle location information
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:location</span><span class='rbracket'>]</span>
      <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_location'>location</span> <span class='op'>&amp;&amp;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_location'>location</span><span class='period'>.</span><span class='id identifier rubyid_address'>address</span> <span class='op'>!=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:street_address</span><span class='rbracket'>]</span>
        <span class='comment'>#delete location and create a new one
</span>        <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_location'>location</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span>
      <span class='kw'>end</span>

      <span class='comment'># Set the address part of the location to be similar to what the user wrote.
</span>      <span class='comment'># the google_address field will store the longer string for the exact position.
</span>      <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:location</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:address</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:street_address</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:street_address</span><span class='rbracket'>]</span>

      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_location'>location</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Location.html" title="Location (class)">Location</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:location</span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:location</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='op'>|</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:location</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span><span class='rbrace'>}</span>
      <span class='id identifier rubyid_params'>params</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:location</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_save'>save</span>
    <span class='id identifier rubyid_update'>update</span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='period'>.</span><span class='id identifier rubyid_except'>except</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>password2</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>street_address</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="email_attributes=-instance_method">
  
    #<strong>email_attributes=</strong>(attributes)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Creates a new email</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


252
253
254
255
256
257
258
259</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 252</span>

<span class='kw'>def</span> <span class='id identifier rubyid_email_attributes='>email_attributes=</span><span class='lparen'>(</span><span class='id identifier rubyid_attributes'>attributes</span><span class='rparen'>)</span>
  <span class='const'>ActiveSupport</span><span class='op'>::</span><span class='const'>Deprecation</span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span><span class='lparen'>(</span>
    <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Person.email_attributes is deprecated.</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
     <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Instead of using nested attributes, build each associated</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
     <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>model individually inside a DB transaction in the controller.</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_emails'>emails</span><span class='period'>.</span><span class='id identifier rubyid_build'>build</span><span class='lparen'>(</span><span class='id identifier rubyid_attributes'>attributes</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="email_changed?-instance_method">
  
    #<strong>email_changed?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Tell Devise that email is not required</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


518
519
520</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 518</span>

<span class='kw'>def</span> <span class='id identifier rubyid_email_changed?'>email_changed?</span>
  <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="email_required?-instance_method">
  
    #<strong>email_required?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Tell Devise that email is not required</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


513
514
515</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 513</span>

<span class='kw'>def</span> <span class='id identifier rubyid_email_required?'>email_required?</span>
  <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="feedback_positive_percentage_in_community-instance_method">
  
    #<strong>feedback_positive_percentage_in_community</strong>(community)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


335
336
337
338
339
340
341
342
343
344
345
346
347
348
349</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 335</span>

<span class='kw'>def</span> <span class='id identifier rubyid_feedback_positive_percentage_in_community'>feedback_positive_percentage_in_community</span><span class='lparen'>(</span><span class='id identifier rubyid_community'>community</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_received'>received</span> <span class='op'>=</span> <span class='id identifier rubyid_received_testimonials'>received_testimonials</span><span class='period'>.</span><span class='id identifier rubyid_by_community'>by_community</span><span class='lparen'>(</span><span class='id identifier rubyid_community'>community</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_positive'>positive</span> <span class='op'>=</span> <span class='id identifier rubyid_received_positive_testimonials'>received_positive_testimonials</span><span class='period'>.</span><span class='id identifier rubyid_by_community'>by_community</span><span class='lparen'>(</span><span class='id identifier rubyid_community'>community</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_negative'>negative</span> <span class='op'>=</span> <span class='id identifier rubyid_received_negative_testimonials'>received_negative_testimonials</span><span class='period'>.</span><span class='id identifier rubyid_by_community'>by_community</span><span class='lparen'>(</span><span class='id identifier rubyid_community'>community</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_positive'>positive</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>0</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_negative'>negative</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>0</span>
      <span class='lparen'>(</span><span class='id identifier rubyid_positive'>positive</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span><span class='op'>/</span><span class='id identifier rubyid_received'>received</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span><span class='op'>*</span><span class='int'>100</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_round'>round</span>
    <span class='kw'>else</span>
      <span class='kw'>return</span> <span class='int'>100</span>
    <span class='kw'>end</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_negative'>negative</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>0</span>
    <span class='kw'>return</span> <span class='int'>0</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="follow-instance_method">
  
    #<strong>follow</strong>(listing)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Starts following a listing</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


376
377
378</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 376</span>

<span class='kw'>def</span> <span class='id identifier rubyid_follow'>follow</span><span class='lparen'>(</span><span class='id identifier rubyid_listing'>listing</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_followed_listings'>followed_listings</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_listing'>listing</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="followed_people_by_id-instance_method">
  
    #<strong>followed_people_by_id</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


557
558
559</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 557</span>

<span class='kw'>def</span> <span class='id identifier rubyid_followed_people_by_id'>followed_people_by_id</span>
  <span class='ivar'>@followed_people_by_id</span> <span class='op'>||=</span> <span class='id identifier rubyid_followed_people'>followed_people</span><span class='period'>.</span><span class='id identifier rubyid_group_by'>group_by</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="follows?-instance_method">
  
    #<strong>follows?</strong>(person)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


553
554
555</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 553</span>

<span class='kw'>def</span> <span class='id identifier rubyid_follows?'>follows?</span><span class='lparen'>(</span><span class='id identifier rubyid_person'>person</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_followed_people_by_id'>followed_people_by_id</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_person'>person</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_admin_rights?-instance_method">
  
    #<strong>has_admin_rights?</strong>(community)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


414
415
416</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 414</span>

<span class='kw'>def</span> <span class='id identifier rubyid_has_admin_rights?'>has_admin_rights?</span><span class='lparen'>(</span><span class='id identifier rubyid_community'>community</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_is_admin?'>is_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_is_marketplace_admin?'>is_marketplace_admin?</span><span class='lparen'>(</span><span class='id identifier rubyid_community'>community</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_confirmed_email?-instance_method">
  
    #<strong>has_confirmed_email?</strong>(address)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns true if the address given as a parameter is confirmed</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


481
482
483
484</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 481</span>

<span class='kw'>def</span> <span class='id identifier rubyid_has_confirmed_email?'>has_confirmed_email?</span><span class='lparen'>(</span><span class='id identifier rubyid_address'>address</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Email.html" title="Email (class)">Email</a></span></span><span class='period'>.</span><span class='id identifier rubyid_find_by_address_and_person_id'>find_by_address_and_person_id</span><span class='lparen'>(</span><span class='id identifier rubyid_address'>address</span><span class='comma'>,</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_email'>email</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_email'>email</span><span class='period'>.</span><span class='id identifier rubyid_confirmed_at'>confirmed_at</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_email?-instance_method">
  
    #<strong>has_email?</strong>(address)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


440
441
442</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 440</span>

<span class='kw'>def</span> <span class='id identifier rubyid_has_email?'>has_email?</span><span class='lparen'>(</span><span class='id identifier rubyid_address'>address</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="Email.html" title="Email (class)">Email</a></span></span><span class='period'>.</span><span class='id identifier rubyid_find_by_address_and_person_id'>find_by_address_and_person_id</span><span class='lparen'>(</span><span class='id identifier rubyid_address'>address</span><span class='comma'>,</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_profile_picture?-instance_method">
  
    #<strong>has_profile_picture?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>If image_file_name is null, it means the user does not have a profile picture.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


508
509
510</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 508</span>

<span class='kw'>def</span> <span class='id identifier rubyid_has_profile_picture?'>has_profile_picture?</span>
  <span class='id identifier rubyid_image_file_name'>image_file_name</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_valid_email_for_community?-instance_method">
  
    #<strong>has_valid_email_for_community?</strong>(community)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


486
487
488</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 486</span>

<span class='kw'>def</span> <span class='id identifier rubyid_has_valid_email_for_community?'>has_valid_email_for_community?</span><span class='lparen'>(</span><span class='id identifier rubyid_community'>community</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_community'>community</span><span class='period'>.</span><span class='id identifier rubyid_can_accept_user_based_on_email?'>can_accept_user_based_on_email?</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="inherit_settings_from-instance_method">
  
    #<strong>inherit_settings_from</strong>(current_community)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>A person inherits some default settings from the community in which she is joining</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


523
524
525</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 523</span>

<span class='kw'>def</span> <span class='id identifier rubyid_inherit_settings_from'>inherit_settings_from</span><span class='lparen'>(</span><span class='id identifier rubyid_current_community'>current_community</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_min_days_between_community_updates'>min_days_between_community_updates</span> <span class='op'>=</span> <span class='id identifier rubyid_current_community'>current_community</span><span class='period'>.</span><span class='id identifier rubyid_default_min_days_between_community_updates'>default_min_days_between_community_updates</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_admin?-instance_method">
  
    #<strong>is_admin?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns true if the person has global admin rights in Sharetribe.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


371
372
373</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 371</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_admin?'>is_admin?</span>
  <span class='id identifier rubyid_is_admin'>is_admin</span> <span class='op'>==</span> <span class='int'>1</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_following?-instance_method">
  
    #<strong>is_following?</strong>(listing)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Checks if this user is following the given listing</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


386
387
388</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 386</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_following?'>is_following?</span><span class='lparen'>(</span><span class='id identifier rubyid_listing'>listing</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_followed_listings'>followed_listings</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_listing'>listing</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="is_marketplace_admin?-instance_method">
  
    #<strong>is_marketplace_admin?</strong>(community)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


410
411
412</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 410</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_marketplace_admin?'>is_marketplace_admin?</span><span class='lparen'>(</span><span class='id identifier rubyid_community'>community</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_community_membership'>community_membership</span><span class='period'>.</span><span class='id identifier rubyid_community_id'>community_id</span> <span class='op'>==</span> <span class='id identifier rubyid_community'>community</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_community_membership'>community_membership</span><span class='period'>.</span><span class='id identifier rubyid_admin?'>admin?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="last_community_updates_at-instance_method">
  
    #<strong>last_community_updates_at</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


269
270
271</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 269</span>

<span class='kw'>def</span> <span class='id identifier rubyid_last_community_updates_at'>last_community_updates_at</span>
  <span class='id identifier rubyid_community_updates_last_sent_at'>community_updates_last_sent_at</span> <span class='op'>||</span> <span class='const'><span class='object_link'><a href="#DEFAULT_TIME_FOR_COMMUNITY_UPDATES-constant" title="Person::DEFAULT_TIME_FOR_COMMUNITY_UPDATES (constant)">DEFAULT_TIME_FOR_COMMUNITY_UPDATES</a></span></span><span class='period'>.</span><span class='id identifier rubyid_ago'>ago</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="latest_pending_email_address-instance_method">
  
    #<strong>latest_pending_email_address</strong>(community = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns and email that is pending confirmation If community is given as parameter, in case of many pending emails the one required by the community is returned</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


539
540
541
542
543
544
545
546
547
548
549
550
551</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 539</span>

<span class='kw'>def</span> <span class='id identifier rubyid_latest_pending_email_address'>latest_pending_email_address</span><span class='lparen'>(</span><span class='id identifier rubyid_community'>community</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_pending_emails'>pending_emails</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Email.html" title="Email (class)">Email</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='symbol'>:person_id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='symbol'>:confirmed_at</span> <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_pluck'>pluck</span><span class='lparen'>(</span><span class='symbol'>:address</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_allowed_emails'>allowed_emails</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_community'>community</span><span class='op'>&amp;.</span><span class='id identifier rubyid_allowed_emails'>allowed_emails</span>
    <span class='id identifier rubyid_pending_emails'>pending_emails</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_e'>e</span><span class='op'>|</span>
      <span class='id identifier rubyid_community'>community</span><span class='period'>.</span><span class='id identifier rubyid_email_allowed?'>email_allowed?</span><span class='lparen'>(</span><span class='id identifier rubyid_e'>e</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_pending_emails'>pending_emails</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_allowed_emails'>allowed_emails</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="member_of?-instance_method">
  
    #<strong>member_of?</strong>(community)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


432
433
434</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 432</span>

<span class='kw'>def</span> <span class='id identifier rubyid_member_of?'>member_of?</span><span class='lparen'>(</span><span class='id identifier rubyid_community'>community</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_community'>community</span><span class='period'>.</span><span class='id identifier rubyid_members'>members</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="offers-instance_method">
  
    #<strong>offers</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


327
328
329</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 327</span>

<span class='kw'>def</span> <span class='id identifier rubyid_offers'>offers</span>
  <span class='id identifier rubyid_listings'>listings</span><span class='period'>.</span><span class='id identifier rubyid_offers'>offers</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="password=-instance_method">
  
    #<strong>password=</strong>(*args)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Overrides method injected from Devise::DatabaseAuthenticatable Removes legacy pashsword and salt.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


587
588
589
590
591</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 587</span>

<span class='kw'>def</span> <span class='id identifier rubyid_password='>password=</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_legacy_encrypted_password'>legacy_encrypted_password</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_password_salt'>password_salt</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>super</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="picture_from_url-instance_method">
  
    #<strong>picture_from_url</strong>(url)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


322
323
324
325</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 322</span>

<span class='kw'>def</span> <span class='id identifier rubyid_picture_from_url'>picture_from_url</span><span class='lparen'>(</span><span class='id identifier rubyid_url'>url</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_image'>image</span> <span class='op'>=</span> <span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_url'>url</span><span class='rparen'>)</span> <span class='comment'># rubocop:disable Security/Open
</span>  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_save'>save</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="primary_email-instance_method">
  
    #<strong>primary_email</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Primary email is the first email address that is</p>
<ul><li>
<p>confirmed</p>
</li><li>
<p>notifications allowed</p>
</li></ul>

<p>Returns Email record</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


466
467
468</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 466</span>

<span class='kw'>def</span> <span class='id identifier rubyid_primary_email'>primary_email</span>
  <span class='const'><span class='object_link'><a href="EmailService.html" title="EmailService (class)">EmailService</a></span></span><span class='period'>.</span><span class='id identifier rubyid_emails_to_send_message'><span class='object_link'><a href="EmailService.html#emails_to_send_message-class_method" title="EmailService.emails_to_send_message (method)">emails_to_send_message</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_emails'>emails</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="profile_info_empty?-instance_method">
  
    #<strong>profile_info_empty?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


428
429
430</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 428</span>

<span class='kw'>def</span> <span class='id identifier rubyid_profile_info_empty?'>profile_info_empty?</span>
  <span class='lparen'>(</span><span class='id identifier rubyid_phone_number'>phone_number</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_phone_number'>phone_number</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_description'>description</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_description'>description</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_location'>location</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="read-instance_method">
  
    #<strong>read</strong>(conversation)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


402
403
404</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 402</span>

<span class='kw'>def</span> <span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_conversation'>conversation</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_conversation'>conversation</span><span class='period'>.</span><span class='id identifier rubyid_participations'>participations</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>person_id LIKE ?</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_update_attribute'>update_attribute</span><span class='lparen'>(</span><span class='symbol'>:is_read</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="requests-instance_method">
  
    #<strong>requests</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


331
332
333</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 331</span>

<span class='kw'>def</span> <span class='id identifier rubyid_requests'>requests</span>
  <span class='id identifier rubyid_listings'>listings</span><span class='period'>.</span><span class='id identifier rubyid_requests'>requests</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reset_password_token_if_needed-instance_method">
  
    #<strong>reset_password_token_if_needed</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


496
497
498
499
500
501
502
503
504</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 496</span>

<span class='kw'>def</span> <span class='id identifier rubyid_reset_password_token_if_needed'>reset_password_token_if_needed</span>
  <span class='comment'># Devise 3.1.0 doesn&#39;t expose methods to generate reset_password_token without
</span>  <span class='comment'># sending the email, so this code is copy-pasted from Recoverable module
</span>  <span class='id identifier rubyid_raw'>raw</span><span class='comma'>,</span> <span class='id identifier rubyid_enc'>enc</span> <span class='op'>=</span> <span class='const'>Devise</span><span class='period'>.</span><span class='id identifier rubyid_token_generator'>token_generator</span><span class='period'>.</span><span class='id identifier rubyid_generate'>generate</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='comma'>,</span> <span class='symbol'>:reset_password_token</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_reset_password_token'>reset_password_token</span>   <span class='op'>=</span> <span class='id identifier rubyid_enc'>enc</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_reset_password_sent_at'>reset_password_sent_at</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_utc'>utc</span>
  <span class='id identifier rubyid_save'>save</span><span class='lparen'>(</span><span class='symbol'>:validate</span> <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raw'>raw</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_default_preferences-instance_method">
  
    #<strong>set_default_preferences</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


351
352
353
354
355
356</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 351</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_default_preferences'>set_default_preferences</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_preferences'>preferences</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="#EMAIL_NOTIFICATION_TYPES-constant" title="Person::EMAIL_NOTIFICATION_TYPES (constant)">EMAIL_NOTIFICATION_TYPES</a></span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_t'>t</span><span class='op'>|</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_preferences'>preferences</span><span class='lbracket'>[</span><span class='id identifier rubyid_t'>t</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="#EMAIL_NEWSLETTER_TYPES-constant" title="Person::EMAIL_NEWSLETTER_TYPES (constant)">EMAIL_NEWSLETTER_TYPES</a></span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_t'>t</span><span class='op'>|</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_preferences'>preferences</span><span class='lbracket'>[</span><span class='id identifier rubyid_t'>t</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_save'>save</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_emails_that_receive_notifications-instance_method">
  
    #<strong>set_emails_that_receive_notifications</strong>(email_ids)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


261
262
263
264
265
266
267</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 261</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_emails_that_receive_notifications'>set_emails_that_receive_notifications</span><span class='lparen'>(</span><span class='id identifier rubyid_email_ids'>email_ids</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_email_ids'>email_ids</span>
    <span class='id identifier rubyid_emails'>emails</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_email'>email</span><span class='op'>|</span>
      <span class='id identifier rubyid_email'>email</span><span class='period'>.</span><span class='id identifier rubyid_update_attribute'>update_attribute</span><span class='lparen'>(</span><span class='symbol'>:send_notifications</span><span class='comma'>,</span> <span class='id identifier rubyid_email_ids'>email_ids</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_given_name-instance_method">
  
    #<strong>set_given_name</strong>(name)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


284
285
286</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 284</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_given_name'>set_given_name</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_update'>update</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='symbol'>:given_name</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_name'>name</span> <span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="should_receive?-instance_method">
  
    #<strong>should_receive?</strong>(email_type)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


418
419
420
421
422
423
424
425
426</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 418</span>

<span class='kw'>def</span> <span class='id identifier rubyid_should_receive?'>should_receive?</span><span class='lparen'>(</span><span class='id identifier rubyid_email_type'>email_type</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_confirmed_email'>confirmed_email</span> <span class='op'>=</span> <span class='op'>!</span><span class='id identifier rubyid_confirmed_notification_emails'>confirmed_notification_emails</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_email_type'>email_type</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>community_updates</span><span class='tstring_end'>&quot;</span></span>
    <span class='comment'># this is handled outside prefenrences so answer separately
</span>    <span class='kw'>return</span> <span class='id identifier rubyid_confirmed_email'>confirmed_email</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_min_days_between_community_updates'>min_days_between_community_updates</span> <span class='op'>&lt;</span> <span class='int'>100000</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_confirmed_email'>confirmed_email</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_preferences'>preferences</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_preferences'>preferences</span><span class='lbracket'>[</span><span class='id identifier rubyid_email_type'>email_type</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="should_receive_community_updates_now?-instance_method">
  
    #<strong>should_receive_community_updates_now?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


527
528
529
530
531
532
533
534</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 527</span>

<span class='kw'>def</span> <span class='id identifier rubyid_should_receive_community_updates_now?'>should_receive_community_updates_now?</span>
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='id identifier rubyid_should_receive?'>should_receive?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>community_updates</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='comment'># return whether or not enought time has passed. The - 45.minutes is because the sending takes some time so we want
</span>  <span class='comment'># 1 day limit to match even if there&#39;s 23.55 minutes passed since last sending.
</span>  <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_community_updates_last_sent_at'>community_updates_last_sent_at</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_community_updates_last_sent_at'>community_updates_last_sent_at</span> <span class='op'>+</span> <span class='id identifier rubyid_min_days_between_community_updates'>min_days_between_community_updates</span><span class='period'>.</span><span class='id identifier rubyid_days'>days</span> <span class='op'>-</span> <span class='int'>45</span><span class='period'>.</span><span class='id identifier rubyid_minutes'>minutes</span> <span class='op'>&lt;</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="street_address-instance_method">
  
    #<strong>street_address</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


288
289
290
291
292
293
294</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 288</span>

<span class='kw'>def</span> <span class='id identifier rubyid_street_address'>street_address</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_location'>location</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_location'>location</span><span class='period'>.</span><span class='id identifier rubyid_address'>address</span>
  <span class='kw'>else</span>
    <span class='kw'>return</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_param-instance_method">
  
    #<strong>to_param</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


175
176
177</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 175</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_param'>to_param</span>
  <span class='id identifier rubyid_username'>username</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unfollow-instance_method">
  
    #<strong>unfollow</strong>(listing)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Unfollows a listing</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


381
382
383</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 381</span>

<span class='kw'>def</span> <span class='id identifier rubyid_unfollow'>unfollow</span><span class='lparen'>(</span><span class='id identifier rubyid_listing'>listing</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_followed_listings'>followed_listings</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_listing'>listing</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unsubscribe_from_community_updates-instance_method">
  
    #<strong>unsubscribe_from_community_updates</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


593
594
595
596</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 593</span>

<span class='kw'>def</span> <span class='id identifier rubyid_unsubscribe_from_community_updates'>unsubscribe_from_community_updates</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_min_days_between_community_updates'>min_days_between_community_updates</span> <span class='op'>=</span> <span class='int'>100000</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_save!'>save!</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_follow_status-instance_method">
  
    #<strong>update_follow_status</strong>(listing, status)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Updates the user following status based on the given status for the given listing</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


392
393
394
395
396
397
398
399
400</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 392</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_follow_status'>update_follow_status</span><span class='lparen'>(</span><span class='id identifier rubyid_listing'>listing</span><span class='comma'>,</span> <span class='id identifier rubyid_status'>status</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_id'>id</span> <span class='op'>==</span> <span class='id identifier rubyid_listing'>listing</span><span class='period'>.</span><span class='id identifier rubyid_author'>author</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_status'>status</span>
      <span class='id identifier rubyid_follow'>follow</span><span class='lparen'>(</span><span class='id identifier rubyid_listing'>listing</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_is_following?'>is_following?</span><span class='lparen'>(</span><span class='id identifier rubyid_listing'>listing</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_unfollow'>unfollow</span><span class='lparen'>(</span><span class='id identifier rubyid_listing'>listing</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_is_following?'>is_following?</span><span class='lparen'>(</span><span class='id identifier rubyid_listing'>listing</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="uuid_object-instance_method">
  
    #<strong>uuid_object</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


243
244
245
246
247
248
249</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 243</span>

<span class='kw'>def</span> <span class='id identifier rubyid_uuid_object'>uuid_object</span>
  <span class='kw'>if</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:uuid</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='kw'>nil</span>
  <span class='kw'>else</span>
    <span class='const'><span class='object_link'><a href="UUIDUtils.html" title="UUIDUtils (module)">UUIDUtils</a></span></span><span class='period'>.</span><span class='id identifier rubyid_parse_raw'><span class='object_link'><a href="UUIDUtils.html#parse_raw-class_method" title="UUIDUtils.parse_raw (method)">parse_raw</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:uuid</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="valid_password?-instance_method">
  
    #<strong>valid_password?</strong>(password)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Overrides method injected from Devise::DatabaseAuthenticatable Updates password with password that has been rehashed with new algorithm. Removes legacy password and salt.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


569
570
571
572
573
574
575
576
577
578
579
580
581
582
583</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/person.rb', line 569</span>

<span class='kw'>def</span> <span class='id identifier rubyid_valid_password?'>valid_password?</span><span class='lparen'>(</span><span class='id identifier rubyid_password'>password</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_legacy_encrypted_password'>legacy_encrypted_password</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_digest'>digest</span><span class='lparen'>(</span><span class='id identifier rubyid_password'>password</span><span class='comma'>,</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_password_salt'>password_salt</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_casecmp'>casecmp</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_legacy_encrypted_password'>legacy_encrypted_password</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='int'>0</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_password'>password</span> <span class='op'>=</span> <span class='id identifier rubyid_password'>password</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_legacy_encrypted_password'>legacy_encrypted_password</span> <span class='op'>=</span> <span class='kw'>nil</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_password_salt'>password_salt</span> <span class='op'>=</span> <span class='kw'>nil</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_save!'>save!</span>
      <span class='kw'>true</span>
    <span class='kw'>else</span>
      <span class='kw'>false</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='kw'>super</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Tue Feb 11 14:01:51 2020 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.19 (ruby-2.6.2).
</div>

    </div>
  </body>
</html>